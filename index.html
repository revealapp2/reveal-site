<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reveal App: Strategic Poker Tool for All Major Platforms</title>
    
    <!-- SEO/Marketing Note: Keywords like "hack" can negatively impact search engine ranking and may violate advertising platform policies. Review for brand safety. -->
    <meta name="description" content="Elevate your game with Reveal App, the premier strategic assistant for PPPOKER, GGPoker, UPOKER, PokerBros, XPOKER, Pokerrr2, PokerStars, KKPoker, Suprema Poker, and more. Gain critical insights by seeing opponent and board cards to make smarter, data-driven decisions. Undetectable, safe, and secure.">
    <meta name="keywords" content="poker tool, poker analysis, pppoker hack, ggpoker hack, upoker hack, pokerbros hack, xpoker hack, pokerrr2 hack, pokerstars hack, kkpoker hack, suprema poker hack, wepoker hack, acr poker hack, coinpoker hack, see cards poker, online poker cheat, poker cheat engine, reveal cards app, poker advantage software, how to win at online poker, android poker hack, ios poker hack, mobile poker cheat, poker solver, GTO solver, real time poker assistant, poker predictor, win poker online">
    
    <link rel="canonical" href="https://revealpoker.top/">
    <meta property="og:title" content="Reveal App: Your Unbeatable Strategic Poker Advantage">
    <meta property="og:description" content="The professional tool to see your opponents' cards on PPPOKER, GGPoker, UPOKER, PokerBros, and more. Play with superior information and multiply your winnings.">
    <meta property="og:image" content="https://revealpoker.top/reveal-app-preview.png">
    <meta property="og:url" content="https://revealpoker.top/">
    <meta property="og:type" content="website">

    <!-- Using an external SVG for better caching and compatibility -->
    <link id="favicon" rel="icon" href="favicon.svg" type="image/svg+xml">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Font Awesome with Subresource Integrity (SRI) for security -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" xintegrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    <!-- TailwindCSS JIT CDN script does not support SRI as it's generated dynamically. For production, a build step is recommended. -->
    <script src="https://cdn.tailwindcss.com"></script>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@graph": [
        {
          "@type": "Organization",
          "name": "Reveal App",
          "url": "https://revealpoker.top/",
          "logo": "https://revealpoker.top/logo.svg",
          "sameAs": [
            "https://t.me/bedmalcon_temp",
            "https://instagram.com/hackpoker_updated"
          ],
          "contactPoint": {
            "@type": "ContactPoint",
            "email": "support@revealpoker.top",
            "contactType": "Customer Support"
          }
        },
        {
          "@type": "WebSite",
          "url": "https://revealpoker.top/",
          "name": "Reveal App",
          "description": "The premier strategic assistant for major online poker platforms, helping players make smarter, data-driven decisions by revealing opponent and board cards.",
          "publisher": {
            "@type": "Organization",
            "name": "Reveal App"
          }
        },
        {
          "@type": "Product",
          "name": "Reveal App - Board Reader",
          "description": "See community cards (Flop, Turn, and River) before they are dealt.",
          "brand": { "@type": "Brand", "name": "Reveal App" },
          "offers": {
            "@type": "Offer",
            "priceCurrency": "USD",
            "description": "Monthly subscription for the Board Reader plan."
          }
        },
        {
          "@type": "Product",
          "name": "Reveal App - Opponent Insight",
          "description": "See opponents' hole cards to know exactly what you're up against pre-flop.",
          "brand": { "@type": "Brand", "name": "Reveal App" },
          "offers": {
            "@type": "Offer",
            "priceCurrency": "USD",
            "description": "Monthly subscription for the Opponent Insight plan."
          }
        },
        {
          "@type": "Product",
          "name": "Reveal App - Total Vision",
          "description": "The ultimate advantage combining Board Reader and Opponent Insight to see ALL cards.",
          "brand": { "@type": "Brand", "name": "Reveal App" },
          "offers": {
            "@type": "Offer",
            "priceCurrency": "USD",
            "description": "Monthly subscription for the Total Vision plan."
          }
        },
        {
          "@type": "FAQPage",
          "mainEntity": [
            {
              "@type": "Question",
              "name": "Is it safe? Can I be banned?",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "Yes, it is 100% safe. Reveal App operates as an external assistant and does not modify the poker app's files, making it completely undetectable. Thousands of users have been playing safely for months without any issues."
              }
            },
            {
              "@type": "Question",
              "name": "How does the technology work?",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "Our system intercepts and decrypts encrypted game data packets in real-time using advanced proprietary algorithms. This reveals hand data before it's displayed, giving you a complete strategic overview of the table for more informed decisions."
              }
            },
            {
              "@type": "Question",
              "name": "How does the payment work?",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "We use cryptocurrency to ensure your complete anonymity. You choose your crypto, send the amount for your plan to the provided address, and contact our support on Telegram with your unique ID to finalize the activation."
              }
            },
            {
              "@type": "Question",
              "name": "Is this a subscription?",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "Yes. To ensure continuous development and support, Reveal App operates on a monthly plan (or quarterly after Sep 2025). This makes it a fair and affordable investment in your success. You can also choose an annual plan for a significant discount."
              }
            },
            {
              "@type": "Question",
              "name": "How long for activation?",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "Activation is nearly instant. After sending your ID to our 24/7 support on Telegram, the process is typically completed in under 5 minutes."
              }
            }
          ]
        },
        {
            "@type": "VideoObject",
            "name": "Reveal App Demo on PPPOKER",
            "description": "A demonstration of the Reveal App strategic assistant in action on the PPPOKER platform.",
            "thumbnailUrl": "https://i.ytimg.com/vi/wgzzXJx_TAI/maxresdefault.jpg",
            "uploadDate": "2023-01-01T08:00:00+00:00",
            "embedUrl": "https://www.youtube.com/embed/wgzzXJx_TAI"
        },
        {
            "@type": "VideoObject",
            "name": "Reveal App Demo on XPoker",
            "description": "A demonstration of the Reveal App strategic assistant in action on the XPoker platform.",
            "thumbnailUrl": "https://i.ytimg.com/vi/JejQNbgaSSo/maxresdefault.jpg",
            "uploadDate": "2023-01-01T08:00:00+00:00",
            "embedUrl": "https://www.youtube.com/embed/JejQNbgaSSo"
        },
        {
            "@type": "VideoObject",
            "name": "Reveal App Demo on ClubGG",
            "description": "A demonstration of the Reveal App strategic assistant in action on the ClubGG platform.",
            "thumbnailUrl": "https://i.ytimg.com/vi/dUW9mVVhJ-0/maxresdefault.jpg",
            "uploadDate": "2023-01-01T08:00:00+00:00",
            "embedUrl": "https://www.youtube.com/embed/dUW9mVVhJ-0"
        }
      ]
    }
    </script>

    <style>
        :root {
            --primary-color: #FBBF24; 
            --secondary-color: #10B981;
            --background-dark: #0B1120;
            --background-light: #171F2D;
            --text-light: #F9FAFB;
            --text-dark: #0B1120;
            --border-color: rgba(255, 255, 255, 0.1);
        }
        html { font-size: 16px; }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background-dark);
            background-image: radial-gradient(circle at top left, rgba(251, 191, 36, 0.1), transparent 30%), radial-gradient(circle at bottom right, rgba(16, 185, 129, 0.1), transparent 30%);
            color: var(--text-light);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        .cta-button {
            background: linear-gradient(90deg, var(--primary-color), #F59E0B);
            color: var(--text-dark);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .cta-button:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 15px 30px rgba(251, 191, 36, 0.3);
            will-change: transform, box-shadow;
        }
        .btn-secondary {
            background-color: transparent;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
            transition: all 0.3s ease;
        }
        .btn-secondary:hover {
            background-color: var(--primary-color);
            color: var(--text-dark);
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 10px 20px rgba(251, 191, 36, 0.2);
            will-change: transform, box-shadow;
        }
        .cta-pulse {
            animation: pulse-cta 2.5s infinite;
        }
        .dialog {
            background-color: rgba(11, 17, 32, 0.8);
            backdrop-filter: blur(12px);
        }
        .dialog-content {
            background: var(--background-light);
            border: 1px solid var(--border-color);
            box-shadow: 0 25px 50px -12px rgba(0,0,0,0.75);
            max-height: 90vh;
            overflow-y: auto;
        }
        .video-container {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 */
            height: 0;
            overflow: hidden;
            border-radius: 0.75rem;
            border: 1px solid var(--border-color);
        }
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        .feature-card, .testimonial-card, .faq-item, .pricing-card {
            background: var(--background-light);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }
        .feature-card:hover, .testimonial-card:hover, .pricing-card:hover {
            transform: translateY(-8px);
            border-color: var(--primary-color);
            box-shadow: 0 0 30px rgba(251, 191, 36, 0.1);
            will-change: transform, border-color, box-shadow;
        }
        .animate-on-scroll {
            opacity: 0;
            transform: translateY(40px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
            will-change: opacity, transform;
        }
        .animate-on-scroll.is-visible {
            opacity: 1;
            transform: translateY(0);
        }
        @keyframes pulse-cta {
            0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(251, 191, 36, 0.7); }
            50% { transform: scale(1.05); box-shadow: 0 0 20px 10px rgba(251, 191, 36, 0); }
        }
        .social-proof-notification {
            transition: opacity 0.5s, transform 0.5s;
            transform: translateX(-120%);
        }
        .social-proof-notification.show {
            transform: translateX(0);
            opacity: 1;
        }
        .hero-bg {
            background-image: url('https://images.unsplash.com/photo-1586228718958-38d2f243a34a?q=80&w=1600&auto=format&fit=crop');
        }
        .faq-item summary::-webkit-details-marker { display: none; }
        .faq-item[open] summary { color: var(--primary-color); }
        .skiptranslate { display: none !important; }
        body { top: 0px !important; }
        #google_translate_element .goog-te-gadget-simple,
        #google_translate_element_mobile .goog-te-gadget-simple {
            background-color: var(--background-light) !important;
            border: 1px solid var(--border-color) !important;
            border-radius: 9999px !important;
            padding: 0.5rem 1rem !important;
        }
        #google_translate_element .goog-te-gadget-simple span,
        #google_translate_element_mobile .goog-te-gadget-simple span {
            color: #e2e8f0 !important;
        }
        .spinner {
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 2px solid var(--primary-color);
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        @keyframes blink {
            50% { opacity: 0.5; }
        }
        .live-indicator::before {
            content: '';
            display: inline-block;
            width: 8px;
            height: 8px;
            background-color: #ff4136;
            border-radius: 50%;
            margin-right: 8px;
            animation: blink 1.5s infinite;
        }
        .progress-bar-container {
            background-color: #374151;
            border-radius: 9999px;
            overflow: hidden;
            height: 8px;
        }
        .progress-bar {
            background-color: var(--secondary-color);
            height: 100%;
            transition: width 0.5s ease-in-out;
        }
        .selection-button, .combo-option {
            background-color: var(--background-dark);
            border: 1px solid var(--border-color);
            transition: all 0.2s ease-in-out;
            cursor: pointer;
        }
        .selection-button:hover, .combo-option:hover {
            border-color: var(--primary-color);
            transform: translateY(-2px);
        }
        .selection-button.selected, .combo-option.selected {
            background-color: var(--secondary-color);
            border-color: var(--secondary-color);
            color: white;
        }
        .selection-button.disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background-color: var(--background-light);
            border-color: var(--border-color);
        }
        .selection-button.disabled:hover {
            transform: none;
        }
        .upsell-option {
            border: 1px solid var(--border-color);
            transition: all 0.2s ease-in-out;
            cursor: pointer;
        }
        .upsell-option:hover {
            border-color: var(--primary-color);
        }
        .upsell-option.selected {
            border-color: var(--secondary-color);
            background-color: rgba(16, 185, 129, 0.1);
        }
        .activity-feed {
            background-color: var(--background-dark);
            border: 1px solid var(--border-color);
            border-radius: 0.75rem;
            padding: 1rem;
            height: 400px;
            overflow-y: auto;
            display: flex;
            flex-direction: column-reverse;
        }
        .activity-item {
            padding: 0.75rem 1rem;
            border-bottom: 1px solid var(--border-color);
            animation: fadeIn 0.5s ease-out;
        }
        .activity-item:last-child {
            border-bottom: none;
        }
        .testimonial-card {
            position: relative; /* Needed for quote icon positioning */
        }
        .testimonial-card .quote-icon {
            font-size: 4rem;
            color: var(--primary-color);
            opacity: 0.1;
            position: absolute;
            top: 0.5rem;
            left: 0.5rem;
            z-index: 0;
        }
        .verified-badge {
            background-color: var(--secondary-color);
            color: white;
            font-size: 0.65rem;
            padding: 0.1rem 0.5rem;
            border-radius: 9999px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-6WV95XF58S"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-6WV95XF58S');
    </script>
</head>
<body class="bg-background-dark text-text-light">

    <!-- Country Selection Modal -->
    <div id="country-selection-modal" class="fixed inset-0 z-50 flex items-center justify-center p-4 dialog">
        <div class="dialog-content w-full max-w-md p-8 rounded-2xl text-center">
            <h2 class="text-3xl font-bold mb-4 text-primary-color">Welcome!</h2>
            <p class="text-gray-300 mb-6">For a better experience, please select your country.</p>
            <select id="country-select-input" class="bg-gray-700 border border-gray-600 text-white text-lg rounded-lg block w-full p-3 mb-6" aria-label="Country selection">
                <option value="">Select your country...</option>
            </select>
            <button id="country-select-btn" class="w-full cta-button font-bold py-3 text-lg rounded-lg">Continue</button>
            <p id="api-error-notice" class="text-red-400 text-sm mt-4 hidden">Could not load location data. Using default values.</p>
        </div>
    </div>
    
    <div id="page-content" class="hidden">
        <!-- Header -->
        <header role="banner" class="bg-background-dark sticky top-0 z-40" id="main-header">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex items-center justify-between h-20">
                    <div class="flex-shrink-0">
                        <!-- Note: aria-label is static and won't be translated by Google Translate. For full localization, a dedicated i18n library is needed. -->
                        <a href="#" onclick="window.location.reload()" class="flex items-center space-x-3" aria-label="Reveal App Home">
                            <img src="favicon.svg" alt="Reveal App Logo" class="h-10 w-auto">
                            <span class="text-2xl font-bold text-white">Reveal App</span>
                        </a>
                    </div>
                    <nav class="hidden md:flex md:space-x-8" aria-label="Main navigation">
                        <a href="#features" class="text-gray-300 hover:text-primary-color transition">Features</a>
                        <a href="#how-it-works" class="text-gray-300 hover:text-primary-color transition">How It Works</a>
                        <a href="#demo" class="text-gray-300 hover:text-primary-color transition">Demo</a>
                        <a href="#pricing" class="text-gray-300 hover:text-primary-color transition">Pricing</a>
                        <a href="#activity-feed-section" class="text-gray-300 hover:text-primary-color transition">Activity Feed</a>
                        <a href="#faq" class="text-gray-300 hover:text-primary-color transition">FAQ</a>
                    </nav>
                    <div class="hidden md:flex items-center space-x-4">
                        <div id="google_translate_element"></div>
                    </div>
                    <div class="md:hidden flex items-center">
                        <button id="mobile-menu-button" class="text-gray-300 hover:text-white focus:outline-none" aria-label="Open main menu" aria-expanded="false" aria-controls="mobile-menu">
                            <i class="fas fa-bars text-2xl"></i>
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Mobile Menu -->
        <div id="mobile-menu" class="md:hidden mobile-menu bg-[#0B1120] transform -translate-x-full fixed top-0 left-0 h-full w-64 z-50 p-6 shadow-2xl transition-transform duration-300 ease-in-out">
            <nav class="flex flex-col space-y-6 mt-8 text-lg" aria-label="Mobile navigation">
                <a href="#features" class="text-gray-300 hover:text-primary-color transition">Features</a>
                <a href="#how-it-works" class="text-gray-300 hover:text-primary-color transition">How It Works</a>
                <a href="#demo" class="text-gray-300 hover:text-primary-color transition">Demo</a>
                <a href="#pricing" class="text-gray-300 hover:text-primary-color transition">Pricing</a>
                <a href="#activity-feed-section" class="text-gray-300 hover:text-primary-color transition">Activity Feed</a>
                <a href="#faq" class="text-gray-300 hover:text-primary-color transition">FAQ</a>
                <a href="#get-app" class="cta-button text-center font-bold py-3 px-6 rounded-full mt-6">Get Advantage</a>
                 <div class="mt-4 pt-4 border-t border-gray-700">
                      <div id="google_translate_element_mobile"></div>
                 </div>
            </nav>
        </div>

        <main role="main" id="main-content">
            <!-- Hero Section -->
            <section class="hero relative py-24 md:py-40 text-center text-white overflow-hidden">
                <div class="absolute inset-0 bg-cover bg-center bg-no-repeat hero-bg opacity-30"></div>
                <div class="absolute inset-0 bg-gradient-to-b from-background-dark/80 via-background-dark to-background-dark"></div>
                <div class="container mx-auto px-4 sm:px-6 lg:px-8 relative">
                    <h1 class="text-4xl sm:text-6xl md:text-7xl font-extrabold mb-6 leading-tight">They play in the dark. <br class="hidden md:block"> You play with all the cards in hand.</h1>
                    <p class="text-lg md:text-xl max-w-4xl mx-auto mb-10 text-gray-300">While your opponents rely on luck, you'll play with superior information. Join the elite players profiting on <strong>PPPOKER, GGPoker, UPOKER, PokerBros, XPOKER, Pokerrr2, PokerStars, KKPoker, Suprema Poker, WEPoker, ACR Poker, FishPoker, PokerMaster, Poker 21Plus & CoinPoker</strong>.</p>
                    <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
                        <a href="#get-app" class="cta-button cta-pulse text-xl font-bold py-4 px-10 rounded-full w-full sm:w-auto">I want to see all the cards now</a>
                        <a href="#pricing" class="btn-secondary text-xl font-bold py-4 px-10 rounded-full w-full sm:w-auto flex items-center justify-center gap-2">
                            <i class="fas fa-tags" aria-hidden="true"></i>
                            <span>View Pricing</span>
                        </a>
                    </div>
                </div>
            </section>
            
            <!-- Social Proof / Counters -->
            <section class="py-12 bg-background-dark" aria-labelledby="social-proof-heading">
                <h2 id="social-proof-heading" class="sr-only">Social Proof</h2>
                <div class="container mx-auto px-4">
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-8 text-center">
                        <div class="animate-on-scroll">
                            <p class="text-4xl font-bold text-primary-color" id="counter-players"></p>
                            <p class="text-gray-400">Active Players</p>
                        </div>
                         <div class="animate-on-scroll" style="transition-delay: 0.2s;">
                            <p class="text-4xl font-bold text-primary-color" id="counter-winnings"></p>
                            <p class="text-gray-400">Weekly Winnings</p>
                        </div>
                         <div class="animate-on-scroll" style="transition-delay: 0.4s;">
                            <p class="text-4xl font-bold text-primary-color" id="counter-satisfaction">98.7%</p>
                            <p class="text-gray-400">Satisfaction Rate</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Features Section -->
            <section id="features" class="py-20 md:py-28" aria-labelledby="features-heading">
                <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                    <h2 id="features-heading" class="text-4xl md:text-5xl font-bold text-center mb-16">Your Definitive Strategic Advantage</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                        <div class="feature-card animate-on-scroll p-8 rounded-2xl">
                            <div class="text-4xl text-primary-color mb-4"><i class="fas fa-eye" aria-hidden="true"></i></div>
                            <h3 class="text-2xl font-bold mb-3">Total Table Vision</h3>
                            <p class="text-gray-400">See opponents' hole cards and community cards (Flop, Turn, River) before they are dealt. Make perfect decisions every time.</p>
                        </div>
                        <div class="feature-card animate-on-scroll p-8 rounded-2xl" style="transition-delay: 200ms;">
                            <div class="text-4xl text-primary-color mb-4"><i class="fas fa-shield-alt" aria-hidden="true"></i></div>
                            <h3 class="text-2xl font-bold mb-3">100% Safe and Hidden</h3>
                            <p class="text-gray-400">Our technology operates externally, without modifying game files. Play with complete peace of mind, your account is always protected.</p>
                        </div>
                        <div class="feature-card animate-on-scroll p-8 rounded-2xl" style="transition-delay: 400ms;">
                            <div class="text-4xl text-primary-color mb-4"><i class="fas fa-microchip" aria-hidden="true"></i></div>
                            <h3 class="text-2xl font-bold mb-3">Advanced Decryption</h3>
                            <p class="text-gray-400">Our system decrypts the game's data packets in real-time, revealing all card information for a complete strategic overview.</p>
                        </div>
                        <div class="feature-card animate-on-scroll p-8 rounded-2xl" style="transition-delay: 600ms;">
                            <div class="text-4xl text-primary-color mb-4"><i class="fas fa-chart-line" aria-hidden="true"></i></div>
                            <h3 class="text-2xl font-bold mb-3">Immediate Results</h3>
                            <p class="text-gray-400">Turn losses into consistent profits. Your monthly plan is an investment in your poker career, paying for itself in a few sessions.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- How It Works Section -->
            <section id="how-it-works" class="py-20 md:py-28 bg-background-light" aria-labelledby="how-it-works-heading">
                 <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                    <h2 id="how-it-works-heading" class="text-4xl md:text-5xl font-bold text-center mb-16">Activate Your Advantage in 3 Steps</h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-12 items-start">
                        <div class="text-center animate-on-scroll">
                            <div class="w-24 h-24 bg-background-dark rounded-full mx-auto flex items-center justify-center text-4xl font-bold text-primary-color border-2 border-primary-color mb-6">1</div>
                            <h3 class="text-2xl font-bold mb-2">Register & Choose</h3>
                            <p class="text-gray-400">Provide your email, country, and select your desired poker platform and advantage level.</p>
                        </div>
                        <div class="text-center animate-on-scroll" style="transition-delay: 200ms;">
                            <div class="w-24 h-24 bg-background-dark rounded-full mx-auto flex items-center justify-center text-4xl font-bold text-primary-color border-2 border-primary-color mb-6">2</div>
                            <h3 class="text-2xl font-bold mb-2">Secure Payment</h3>
                            <p class="text-gray-400">Make an anonymous monthly payment with cryptocurrency to start your plan.</p>
                        </div>
                        <div class="text-center animate-on-scroll" style="transition-delay: 400ms;">
                            <div class="w-24 h-24 bg-background-dark rounded-full mx-auto flex items-center justify-center text-4xl font-bold text-primary-color border-2 border-primary-color mb-6">3</div>
                            <h3 class="text-2xl font-bold mb-2">Activate and Profit</h3>
                            <p class="text-gray-400">Contact our support on Telegram with your ID for instant activation and start winning.</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Demo Section -->
            <section id="demo" class="py-20 md:py-28" aria-labelledby="demo-heading">
                <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                    <h2 id="demo-heading" class="text-4xl md:text-5xl font-bold text-center mb-4">See the Power in Action</h2>
                    <p class="text-lg text-gray-400 text-center max-w-3xl mx-auto mb-12">Watch how our strategic assistant reveals everything. This is what victory looks like:</p>
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <div class="animate-on-scroll">
                            <h3 class="text-xl font-semibold mb-4 text-center">PPPOKER</h3>
                            <div class="video-container"><iframe loading="lazy" src="https://www.youtube.com/embed/wgzzXJx_TAI" title="Reveal App Demo on PPPOKER" frameborder="0" allowfullscreen></iframe></div>
                        </div>
                        <div class="animate-on-scroll" style="transition-delay: 0.2s;">
                            <h3 class="text-xl font-semibold mb-4 text-center">XPoker</h3>
                            <div class="video-container"><iframe loading="lazy" src="https://www.youtube.com/embed/JejQNbgaSSo" title="Reveal App Demo on XPoker" frameborder="0" allowfullscreen></iframe></div>
                        </div>
                        <div class="animate-on-scroll" style="transition-delay: 0.4s;">
                            <h3 class="text-xl font-semibold mb-4 text-center">ClubGG</h3>
                            <div class="video-container"><iframe loading="lazy" src="https://www.youtube.com/embed/dUW9mVVhJ-0" title="Reveal App Demo on ClubGG" frameborder="0" allowfullscreen></iframe></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Pricing Section -->
            <section id="pricing" class="py-20 md:py-28 bg-background-light" aria-labelledby="pricing-heading">
                <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                    <div id="pricing-notice" class="hidden max-w-4xl mx-auto mb-12">
                        <div class="bg-yellow-900/50 border border-yellow-500 text-yellow-300 px-4 py-3 rounded-lg text-center" role="alert">
                            <p><i class="fas fa-info-circle mr-2"></i><strong>Important Update:</strong> Starting September 9, 2025, our standard plans will transition to a quarterly subscription model.</p>
                        </div>
                    </div>
                    <h2 id="pricing-heading" class="text-4xl md:text-5xl font-bold text-center mb-4">Choose Your Plan</h2>
                    <p id="pricing-subtitle" class="text-lg text-gray-400 text-center max-w-3xl mx-auto mb-12">Invest in your success with a plan that fits your strategy.</p>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto">
                        <!-- Tier 1 -->
                        <div class="pricing-card animate-on-scroll p-8 rounded-2xl flex flex-col" data-tier="1">
                            <div class="flex-grow">
                                <h3 class="text-2xl font-bold mb-2 text-primary-color">Board Reader</h3>
                                <div class="my-4 text-center min-h-[100px] flex flex-col justify-center">
                                    <!-- Price will be injected by JS -->
                                </div>
                                <p class="text-gray-400 mb-6 text-center">Get started with our flexible monthly plan.</p>
                                <ul class="space-y-3 text-left">
                                    <li class="flex items-start"><i class="fas fa-check-circle text-secondary-color mt-1 mr-3" aria-hidden="true"></i> <span><strong>See Community Cards:</strong> Know the Flop, Turn, and River in advance.</span></li>
                                </ul>
                            </div>
                            <a href="#get-app" class="btn-secondary text-center mt-8 font-bold py-3 px-6 rounded-full">Select Plan</a>
                        </div>
                        <!-- Tier 2 -->
                        <div class="relative pricing-card animate-on-scroll p-8 rounded-2xl flex flex-col border-2 border-primary-color shadow-2xl shadow-primary-color/10" style="transform: scale(1.05);" data-tier="2">
                             <div class="absolute top-0 -translate-y-1/2 left-1/2 -translate-x-1/2">
                                 <span class="bg-primary-color text-background-dark font-bold text-sm px-4 py-1 rounded-full uppercase">Most Popular</span>
                             </div>
                            <div class="flex-grow">
                                <h3 class="text-2xl font-bold mb-2 text-primary-color">Opponent Insight</h3>
                                 <div class="my-4 text-center min-h-[100px] flex flex-col justify-center">
                                     <!-- Price will be injected by JS -->
                                </div>
                                <p class="text-gray-400 mb-6 text-center">Get started with our flexible monthly plan.</p>
                                <ul class="space-y-3 text-left">
                                    <li class="flex items-start"><i class="fas fa-check-circle text-secondary-color mt-1 mr-3" aria-hidden="true"></i> <span><strong>See Opponents' Cards:</strong> Know exactly what you're up against pre-flop.</span></li>
                                    <li class="flex items-start"><i class="fas fa-check-circle text-secondary-color mt-1 mr-3" aria-hidden="true"></i> <span>Make perfect bluffs and value bets.</span></li>
                                </ul>
                            </div>
                            <a href="#get-app" class="cta-button text-center mt-8 font-bold py-3 px-6 rounded-full">Select Plan</a>
                        </div>
                        <!-- Tier 3 -->
                        <div class="pricing-card animate-on-scroll p-8 rounded-2xl flex flex-col" data-tier="3">
                            <div class="flex-grow">
                                <h3 class="text-2xl font-bold mb-2 text-primary-color">Total Vision</h3>
                                 <div class="my-4 text-center min-h-[100px] flex flex-col justify-center">
                                     <!-- Price will be injected by JS -->
                                </div>
                                <p class="text-gray-400 mb-6 text-center">Get started with our flexible monthly plan.</p>
                                <ul class="space-y-3 text-left">
                                    <li class="flex items-start"><i class="fas fa-check-circle text-secondary-color mt-1 mr-3" aria-hidden="true"></i> <span><strong>See ALL Cards:</strong> Combines Board Reader and Opponent Insight.</span></li>
                                    <li class="flex items-start"><i class="fas fa-check-circle text-secondary-color mt-1 mr-3" aria-hidden="true"></i> <span>The ultimate advantage for maximum profit.</span></li>
                                </ul>
                            </div>
                            <a href="#get-app" class="btn-secondary text-center mt-8 font-bold py-3 px-6 rounded-full">Select Plan</a>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Activity Feed Section -->
            <section id="activity-feed-section" class="py-20 md:py-28" aria-labelledby="activity-heading">
                <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="text-center mb-16 animate-on-scroll">
                        <h2 id="activity-heading" class="text-4xl md:text-5xl font-bold tracking-tight">Real-Time Activity</h2>
                        <p class="mt-4 text-lg text-gray-400 max-w-3xl mx-auto">See anonymized activity from Reveal App users around the world. This is proof that our tool delivers results.</p>
                    </div>
                    <div class="max-w-4xl mx-auto animate-on-scroll" style="transition-delay: 200ms;">
                        <div id="activity-feed" class="activity-feed">
                            <!-- Activity items will be dynamically inserted here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Testimonials Section -->
            <section id="testimonials" class="py-20 md:py-28 bg-background-light" aria-labelledby="testimonials-heading">
                <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                             <h2 id="testimonials-heading" class="text-4xl md:text-5xl font-bold text-center mb-16">What Our Players Say</h2>
                    <div id="testimonials-container" class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <!-- Testimonials will be dynamically inserted here -->
                    </div>
                </div>
            </section>
            
            <!-- Get App Section -->
            <section id="get-app" class="py-20 md:py-28 text-center" aria-labelledby="get-app-heading">
                 <div class="container mx-auto px-4 sm:px-6 lg:px-8 animate-on-scroll">
                    <h2 id="get-app-heading" class="text-4xl md:text-5xl font-bold mb-4">Your Turn to Dominate Has Arrived</h2>
                    <p class="text-lg text-gray-400 max-w-3xl mx-auto mb-10">Every hand played without information is money left on the table. Invest in a strategic advantage, invest in wins.</p>
                    <div class="flex justify-center items-center space-x-4 mb-8">
                        <div id="urgency-text-container" class="text-xl font-semibold text-red-500 animate-pulse">
                            <span>⚠️ Only</span> <strong id="slots-left-main" class="text-2xl"></strong> <span>licenses left today.</span>
                        </div>
                        <div id="live-viewers-container" class="text-lg font-semibold text-secondary-color live-indicator">
                            <strong id="live-viewers-count"></strong> <span>people viewing now</span>
                        </div>
                    </div>
                    <button class="cta-button text-xl font-bold py-4 px-10 rounded-full" id="start-purchase-btn">I want to see all the cards now</button>
                    <div class="flex justify-center items-center flex-wrap gap-x-8 gap-y-4 mt-10 text-gray-400">
                        <div class="flex items-center space-x-2"><i class="fas fa-user-secret text-secondary-color" aria-hidden="true"></i><span>100% Anonymous with Crypto</span></div>
                        <div class="flex items-center space-x-2"><i class="fas fa-shield-alt text-secondary-color" aria-hidden="true"></i><span>100% Secure & Undetectable</span></div>
                        <div class="flex items-center space-x-2"><i class="fas fa-lock text-secondary-color" aria-hidden="true"></i><span>Profit Guarantee</span></div>
                    </div>
                     <p class="text-gray-500 text-sm mt-6">Profit Guarantee: If you don't increase your winnings, we'll refund your investment in credits for future use.</p>
                </div>
            </section>

            <!-- FAQ Section -->
            <section id="faq" class="py-20 md:py-28 bg-background-light" aria-labelledby="faq-heading">
                <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                    <h2 id="faq-heading" class="text-4xl md:text-5xl font-bold text-center mb-16">Frequently Asked Questions</h2>
                    <div class="max-w-3xl mx-auto space-y-4">
                        <details class="faq-item animate-on-scroll p-6 rounded-lg">
                            <summary class="font-semibold text-xl list-none relative pr-8 cursor-pointer">
                                <span>Is it safe? Can I be banned?</span>
                                <i class="fas fa-chevron-down absolute right-0 top-1 transition-transform duration-300" aria-hidden="true"></i>
                            </summary>
                            <p class="text-gray-400 mt-4">Yes, 100% safe. Reveal App operates as an external assistant and does not modify the poker app's files, making it completely undetectable. Thousands of users have been playing safely for months without any issues.</p>
                        </details>
                        <details class="faq-item animate-on-scroll p-6 rounded-lg">
                            <summary class="font-semibold text-xl list-none relative pr-8 cursor-pointer">
                                <span>How does the technology work?</span>
                                <i class="fas fa-chevron-down absolute right-0 top-1 transition-transform duration-300" aria-hidden="true"></i>
                            </summary>
                            <p class="text-gray-400 mt-4">Our system intercepts encrypted game data packets in real-time. By leveraging advanced proprietary algorithms, we can decrypt the hand data before it's displayed. This gives you a clear, strategic overview of the table, allowing for more informed decisions.</p>
                        </details>
                        <details class="faq-item animate-on-scroll p-6 rounded-lg">
                            <summary class="font-semibold text-xl list-none relative pr-8 cursor-pointer">
                                <span>How does the payment work?</span>
                                <i class="fas fa-chevron-down absolute right-0 top-1 transition-transform duration-300" aria-hidden="true"></i>
                            </summary>
                            <p class="text-gray-400 mt-4">We use cryptocurrency to ensure your complete anonymity. The process is simple: you choose your crypto, send the amount for your first month's plan to the provided address, and contact our support on Telegram with your unique ID to finalize the activation.</p>
                        </details>
                        <details class="faq-item animate-on-scroll p-6 rounded-lg">
                            <summary class="font-semibold text-xl list-none relative pr-8 cursor-pointer">
                                <span>Is this a subscription?</span>
                                <i class="fas fa-chevron-down absolute right-0 top-1 transition-transform duration-300" aria-hidden="true"></i>
                            </summary>
                            <p class="text-gray-400 mt-4">Yes. To ensure continuous development and support, Reveal App operates on a monthly plan (or quarterly after Sep 2025). This makes it a fair and affordable investment in your success. You can also choose an annual plan for a significant discount.</p>
                        </details>
                         <details class="faq-item animate-on-scroll p-6 rounded-lg">
                            <summary class="font-semibold text-xl list-none relative pr-8 cursor-pointer">
                                <span>How long for activation?</span>
                                <i class="fas fa-chevron-down absolute right-0 top-1 transition-transform duration-300" aria-hidden="true"></i>
                            </summary>
                            <p class="text-gray-400 mt-4">Activation is almost instant. After sending your ID to our 24/7 support on Telegram, the process is usually completed in under 5 minutes.</p>
                        </details>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="bg-background-dark border-t border-gray-800" aria-labelledby="footer-heading">
            <h2 id="footer-heading" class="sr-only">Footer</h2>
            <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-12">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center md:text-left">
                    <div>
                        <h3 class="text-lg font-semibold mb-4 text-primary-color">About Reveal App</h3>
                        <p class="text-gray-400">Reveal App offers a strategic advantage by providing crucial data on opponents' hands. Play smarter, win bigger.</p>
                    </div>
                    <div>
                        <h3 class="text-lg font-semibold mb-4 text-primary-color">Contact & Support</h3>
                        <div class="space-y-3">
                            <a href="https://t.me/bedmalcon_temp" target="_blank" rel="noopener noreferrer" class="flex items-center justify-center md:justify-start text-gray-400 hover:text-white"><i class="fab fa-telegram w-6" aria-hidden="true"></i><span class="ml-2">Telegram (24/7 Support)</span></a>
                            <a href="https://instagram.com/hackpoker_updated" target="_blank" rel="noopener noreferrer" class="flex items-center justify-center md:justify-start text-gray-400 hover:text-white"><i class="fab fa-instagram w-6" aria-hidden="true"></i><span class="ml-2">@hackpoker_updated</span></a>
                            <a href="mailto:support@revealpoker.top" class="flex items-center justify-center md:justify-start text-gray-400 hover:text-white"><i class="fas fa-envelope w-6" aria-hidden="true"></i><span class="ml-2">support@revealpoker.top</span></a>
                        </div>
                    </div>
                     <div>
                        <h3 class="text-lg font-semibold mb-4 text-primary-color">Quick Links</h3>
                        <ul class="space-y-2">
                            <li><a href="#features" class="text-gray-400 hover:text-white">Features</a></li>
                            <li><a href="#how-it-works" class="text-gray-400 hover:text-white">How It Works</a></li>
                            <li><a href="#pricing" class="text-gray-400 hover:text-white">Pricing</a></li>
                            <li><a href="#faq" class="text-gray-400 hover:text-white">FAQ</a></li>
                        </ul>
                    </div>
                </div>
                <div class="mt-12 border-t border-gray-800 pt-8 text-center text-gray-500">
                    <p>&copy; <span id="current-year"></span> Reveal App. <span>All Rights Reserved.</span></p>
                    <p class="text-sm mt-2">Disclaimer: This tool is an external assistant. Use responsibly and in accordance with the terms of service of the poker platforms.</p>
                </div>
            </div>
        </footer>
    </div>
    
    <!-- Floating Action Buttons -->
    <div class="fixed bottom-5 right-5 z-40 flex flex-col items-end space-y-4">
        <a href="#get-app" id="floating-cta-button" class="cta-button cta-pulse font-bold py-3 px-6 rounded-full shadow-lg flex items-center space-x-2">
            <i class="fas fa-bolt" aria-hidden="true"></i>
            <span>Get App</span>
        </a>
        <a id="floating-chat-widget" href="https://t.me/bedmalcon_temp" target="_blank" rel="noopener noreferrer" class="bg-blue-500 w-16 h-16 rounded-full flex items-center justify-center text-white shadow-lg transform hover:scale-110 transition-transform" aria-label="Contact us on Telegram">
            <i class="fab fa-telegram-plane text-3xl" aria-hidden="true"></i>
        </a>
    </div>

    <div id="social-proof-container" class="fixed bottom-5 left-5 z-50 overflow-hidden"></div>
    <div id="dialog-container" class="fixed inset-0 z-50 flex items-center justify-center p-4 hidden dialog"></div>
    
    <!-- Google Translate script does not support SRI. Deferring its load improves performance. -->
    <script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit" type="text/javascript" defer></script>
    <script>
    // --- Main Application Logic ---
    document.addEventListener('DOMContentLoaded', () => {
        
        const App = {
            state: {
                userCountryCode: null,
                userCountryName: 'your country',
                userCountryFlag: '🌍',
                userCurrencyCode: 'USD',
                userCurrencySymbol: '$',
                usdToLocalRate: 1,
                currencyRates: null,
                isDialogActive: false,
                isQuarterlyBilling: false,
                activityFeedInterval: null,
            },
            purchaseState: {
                email: null,
                os: null,
                basePriceUSD: 0,
                monthlyPriceUSD: 0,
                finalPriceUSD: 0,
                uniqueId: null,
                cheatTier: null, // 1, 2, or 3
                platforms: [], // Array of selected platforms
                txid: null,
                paymentMethod: null,
                cryptoAmountPaid: null,
                feeAmountUSD: 0, // Fee for crypto transaction
                coupon: { code: null, discount: 0 },
                upsells: {
                    additionalPlatforms: [],
                    support: false,
                    annual: false
                }
            },
            urgencyState: {
                socialProofTimeout: null,
                slotsInterval: null,
                viewersInterval: null,
                priceTimerInterval: null,
            },
            observer: null,
            dom: {
                pageContent: document.getElementById('page-content'),
                countrySelectionModal: document.getElementById('country-selection-modal'),
                countrySelectInput: document.getElementById('country-select-input'),
                countrySelectBtn: document.getElementById('country-select-btn'),
                currentYear: document.getElementById('current-year'),
                mobileMenu: document.getElementById('mobile-menu'),
                mobileMenuButton: document.getElementById('mobile-menu-button'),
                dialogContainer: document.getElementById('dialog-container'),
                startPurchaseBtn: document.getElementById('start-purchase-btn'),
                floatingCtaButton: document.getElementById('floating-cta-button'),
                counterPlayers: document.getElementById('counter-players'),
                counterWinnings: document.getElementById('counter-winnings'),
                counterSatisfaction: document.getElementById('counter-satisfaction'),
                slotsLeftMain: document.getElementById('slots-left-main'),
                liveViewersCount: document.getElementById('live-viewers-count'),
                socialProofContainer: document.getElementById('social-proof-container'),
                testimonialsContainer: document.getElementById('testimonials-container'),
                pricingNotice: document.getElementById('pricing-notice'),
                activityFeed: document.getElementById('activity-feed'),
                apiErrorNotice: document.getElementById('api-error-notice'),
            },

            // --- Data & Constants ---
            platforms: [
                { id: 'PPPOKER', name: 'PPPOKER', logo: 'pppoker.png' },
                { id: 'GGPoker', name: 'GGPoker/ClubGG', logo: 'clubgg.png' },
                { id: 'UPOKER', name: 'UPOKER', logo: 'upoker.png' },
                { id: 'PokerBros', name: 'PokerBros', logo: 'pokerbros.png' },
                { id: 'XPOKER', name: 'XPOKER', logo: 'xpoker.png' },
                { id: 'Pokerrr2', name: 'Pokerrr2', logo: 'pokerrrr2.png' },
                { id: 'PokerStars', name: 'PokerStars', logo: 'pokerstars.png' },
                { id: 'KKPoker', name: 'KKPoker', logo: 'kkpoker.png' },
                { id: 'Suprema', name: 'Suprema Poker', logo: 'suprema.png' },
                { id: 'WEPoker', name: 'WEPoker', logo: 'wepoker.png' },
                { id: 'ACRPoker', name: 'ACR Poker', logo: 'acrpoker.png' },
                { id: 'FishPoker', name: 'FishPoker', logo: 'fishpoker.png' },
                { id: 'PokerMaster', name: 'PokerMaster', logo: 'pokermaster.png' },
                { id: 'Poker21Plus', name: 'Poker 21Plus', logo: 'poker21plus.png' },
                { id: 'CoinPoker', name: 'CoinPoker', logo: 'coinpoker.png' }
            ],
            premiumPlatforms: ['GGPoker', 'Suprema', 'PokerStars', 'Pokerrr2'],
            superPremiumPlatforms: ['WEPoker', 'ACRPoker', 'FishPoker', 'PokerMaster', 'Poker21Plus', 'CoinPoker'],
            countrySalaryData: {"AL":{s:701,c:"ALL"},"DZ":{s:267,c:"DZD"},"DE":{s:3984,c:"EUR"},"AR":{s:413,c:"ARS"},"AU":{s:4218,c:"AUD"},"AT":{s:4798,c:"EUR"},"BD":{s:225,c:"BDT"},"BY":{s:620,c:"BYN"},"BO":{s:560,c:"BOB"},"BA":{s:927,c:"BAM"},"BR":{s:800,c:"BRL"},"BG":{s:947,c:"BGN"},"CA":{s:5081,c:"CAD"},"CL":{s:684,c:"CLP"},"CN":{s:1122,c:"CNY"},"CO":{s:311,c:"COP"},"CR":{s:722,c:"CRC"},"HR":{s:959,c:"EUR"},"CZ":{s:2013,c:"CZK"},"DK":{s:5642,c:"DKK"},"EC":{s:791,c:"USD"},"EG":{s:200,c:"EGP"},"SV":{s:450,c:"USD"},"EE":{s:1981,c:"EUR"},"FI":{s:4090,c:"EUR"},"FR":{s:3655,c:"EUR"},"GE":{s:490,c:"GEL"},"GR":{s:1417,c:"EUR"},"GT":{s:480,c:"GTQ"},"HN":{s:370,c:"HNL"},"HK":{s:2828,c:"HKD"},"HU":{s:1189,c:"HUF"},"IS":{s:6441,c:"ISK"},"IN":{s:569,c:"INR"},"ID":{s:340,c:"IDR"},"IR":{s:280,c:"IRR"},"IQ":{s:430,c:"IQD"},"IE":{s:4622,c:"EUR"},"IL":{s:3608,c:"ILS"},"IT":{s:2924,c:"EUR"},"JP":{s:2503,c:"JPY"},"JO":{s:600,c:"JOD"},"KZ":{s:673,c:"KZT"},"KE":{s:150,c:"KES"},"KW":{s:2600,c:"KWD"},"KG":{s:220,c:"KGS"},"LV":{s:1303,c:"EUR"},"LB":{s:130,c:"LBP"},"LT":{s:2173,c:"EUR"},"LU":{s:6633,c:"EUR"},"MY":{s:855,c:"MYR"},"MX":{s:704,c:"MXN"},"MD":{s:450,c:"MDL"},"MN":{s:390,c:"MNT"},"ME":{s:800,c:"EUR"},"MA":{s:380,c:"MAD"},"NL":{s:4581,c:"EUR"},"NZ":{s:2983,c:"NZD"},"NG":{s:60,c:"NGN"},"MK":{s:650,c:"MKD"},"NO":{s:5665,c:"NOK"},"OM":{s:2400,c:"OMR"},"PK":{s:145,c:"PKR"},"PA":{s:717,c:"PAB"},"PY":{s:400,c:"PYG"},"PE":{s:414,c:"PEN"},"PH":{s:306,c:"PHP"},"PL":{s:1416,c:"PLN"},"PT":{s:1983,c:"EUR"},"QA":{s:3937,c:"QAR"},"RO":{s:1306,c:"RON"},"RU":{s:936,c:"RUB"},"SA":{s:2002,c:"SAR"},"RS":{s:750,c:"RSD"},"SG":{s:4350,c:"SGD"},"SK":{s:1512,c:"EUR"},"SI":{s:3058,c:"EUR"},"ZA":{s:1362,c:"ZAR"},"KR":{s:2180,c:"KRW"},"ES":{s:2879,c:"EUR"},"SE":{s:3977,c:"SEK"},"CH":{s:8111,c:"CHF"},"TW":{s:1800,c:"TWD"},"TH":{s:543,c:"THB"},"TR":{s:917,c:"TRY"},"UA":{s:477,c:"UAH"},"AE":{s:3600,c:"AED"},"GB":{s:4179,c:"GBP"},"US":{s:6455,c:"USD"},"UY":{s:850,c:"UYU"},"UZ":{s:300,c:"UZS"},"VE":{s:180,c:"VES"},"VN":{s:275,c:"VND"}},
            allTestimonials: [
                { quote: "Skeptical at first, but the results are undeniable. My win rate tripled. It's like playing with a superpower.", author: "Alex R.", location: "Professional Player 🇺🇸" },
                { quote: "The best investment I've made in poker. The support on Telegram was super fast and helped me with everything. 100% recommended.", author: "Maria S.", location: "Home Games Enthusiast 🇧🇷" },
                { quote: "Finally a tool that works as promised. It's safe, easy to use, and the return is absurd. It turned my game around completely.", author: "Javier G.", location: "Regular Player 🇪🇸" },
                { quote: "I was losing consistently on PokerBros. After using Reveal App for a month, I'm now in profit. It's a game-changer.", author: "Wei L.", location: "Club Player 🇸🇬" },
                { quote: "The ability to see the flop before anyone else is an insane advantage. My decision-making has improved tenfold.", author: "Lars E.", location: "Online Grinder 🇩🇰" },
                { quote: "This app paid for itself in a single weekend. The information it provides is priceless for any serious player.", author: "David C.", location: "Poker Enthusiast 🇨🇦" },
                { quote: "I use it for GGPoker tournaments and the edge it gives me in the late stages is incredible. Highly recommended.", author: "Hans D.", location: "Tournament Player 🇩🇪" },
                { quote: "The setup was easy and the support team was very helpful. Started winning big on Pokerrr2 right away.", author: "Yuki T.", location: "App Player 🇯🇵" },
                { quote: "As a UPOKER agent, I can tell you this is the tool my best players are using. It's simply the best on the market.", author: "Marco P.", location: "Club Manager 🇮🇹" },
                { quote: "I was about to quit online poker. Reveal App gave me the confidence and the information I needed to start crushing the games again.", author: "Ben A.", location: "Comeback Player 🇦🇺" },
                { quote: "The Total Vision package is insane. Knowing every card at the table feels like a cheat code for poker. Worth every penny.", author: "Fatima A.", location: "High Stakes Player 🇦🇪" },
                { quote: "I play on PokerStars and was worried about security. This app is completely undetectable and has made me a much more feared opponent.", author: "Ivan K.", location: "Cash Game Pro 🇷🇺" }
            ],

            // --- Initialization ---
            async init() {
                this.dom.currentYear.textContent = new Date().getFullYear();
                this.handlePricingModelChanges();
                this.initEventListeners();
                this.initConsistentCounters();
                this.initUrgencyFeatures();
                this.initScrollAnimations();
                this.scheduleSocialProof();
                this.initRotatingTestimonials();
                this.initActivityFeed();
                this.updatePricingCards();
                this.initAutoTranslate();
            },

            async initCountrySelection() {
                const savedCountry = localStorage.getItem('userCountryCode');
                if (savedCountry) {
                    await this.fetchCurrencyRates();
                    this.updateUserStateFromCountry(savedCountry, true);
                    this.dom.countrySelectionModal.classList.add('hidden');
                    this.dom.pageContent.classList.remove('hidden');
                    this.init();
                    return;
                }

                const countryOptions = Object.keys(this.countrySalaryData).map(code => {
                    const countryName = new Intl.DisplayNames(['en'], { type: 'region' }).of(code);
                    return `<option value="${code}">${countryName}</option>`;
                }).sort((a,b) => a.localeCompare(b)).join('');
                this.dom.countrySelectInput.innerHTML += countryOptions;

                try {
                    const geoResponse = await fetch('https://ipapi.co/json/');
                    if (!geoResponse.ok) throw new Error('IP-based geolocation failed');
                    const geoData = await geoResponse.json();
                    if (geoData.country_code && this.countrySalaryData[geoData.country_code]) {
                        this.dom.countrySelectInput.value = geoData.country_code;
                    }
                } catch (error) {
                    console.warn("Could not fetch IP geolocation. User will need to select manually.", error);
                    if (this.dom.apiErrorNotice) this.dom.apiErrorNotice.classList.remove('hidden');
                }

                this.dom.countrySelectBtn.addEventListener('click', async () => {
                    let selectedCountry = this.dom.countrySelectInput.value;
                    if (!selectedCountry) {
                        selectedCountry = 'US'; // Fallback if user clicks continue without selecting
                    }
                    await this.fetchCurrencyRates();
                    this.updateUserStateFromCountry(selectedCountry, true);
                    localStorage.setItem('userCountryCode', selectedCountry);
                    
                    this.dom.countrySelectionModal.classList.add('hidden');
                    this.dom.pageContent.classList.remove('hidden');
                    this.init();
                });
            },
            
            async fetchCurrencyRates() {
                try {
                    const response = await fetch('https://open.er-api.com/v6/latest/USD');
                    if (!response.ok) throw new Error('Failed to fetch currency rates');
                    const data = await response.json();
                    this.state.currencyRates = data.rates;
                } catch (error) {
                    console.error("Currency fetch error:", error);
                    this.state.currencyRates = { USD: 1 };
                    if (this.dom.apiErrorNotice) this.dom.apiErrorNotice.classList.remove('hidden');
                }
            },

            initEventListeners() {
                this.dom.mobileMenuButton.addEventListener('click', () => {
                    const isExpanded = this.dom.mobileMenuButton.getAttribute('aria-expanded') === 'true';
                    this.dom.mobileMenuButton.setAttribute('aria-expanded', !isExpanded);
                    this.dom.mobileMenu.classList.toggle('-translate-x-full');
                });

                this.dom.dialogContainer.addEventListener('click', (e) => {
                    if (e.target === this.dom.dialogContainer) this.closeDialog();
                });
                this.dom.startPurchaseBtn.addEventListener('click', () => this.startPurchaseFlow());
                
                document.querySelectorAll('.pricing-card a').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.preventDefault();
                        const tier = e.currentTarget.closest('.pricing-card').dataset.tier;
                        this.startPurchaseFlow(tier);
                    });
                });

                this.dom.floatingCtaButton.addEventListener('click', (e) => {
                    e.preventDefault();
                    document.querySelector('#get-app').scrollIntoView({ behavior: 'smooth' });
                });
                document.querySelectorAll('a[href^="#"]:not(.pricing-card a)').forEach(anchor => {
                    anchor.addEventListener('click', function (e) {
                        e.preventDefault();
                        const targetElement = document.querySelector(this.getAttribute('href'));
                        if (targetElement) {
                           targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        }
                        if (App.dom.mobileMenu && !App.dom.mobileMenu.classList.contains('-translate-x-full')) {
                             App.dom.mobileMenu.classList.add('-translate-x-full');
                             App.dom.mobileMenuButton.setAttribute('aria-expanded', 'false');
                        }
                    });
                });
            },
            
            handlePricingModelChanges() {
                const changeDate = new Date('2025-09-09T00:00:00Z');
                const currentDate = new Date();
                
                if (currentDate >= changeDate) {
                    this.state.isQuarterlyBilling = true;
                    if (this.dom.pricingNotice) this.dom.pricingNotice.classList.add('hidden');
                } else {
                    this.state.isQuarterlyBilling = false;
                    if (this.dom.pricingNotice) this.dom.pricingNotice.classList.remove('hidden');
                }
            },

            initAutoTranslate() {
                const changeGoogleTranslateLanguage = (langCode) => {
                    const teCombo = document.querySelector('.goog-te-combo');
                    if (teCombo) {
                        teCombo.value = langCode;
                        teCombo.dispatchEvent(new Event('change'));
                    }
                };
                
                const attemptTranslation = () => {
                    const userLang = (navigator.language || navigator.userLanguage).split('-')[0];
                    const supportedLanguages = ['pt', 'es', 'de', 'zh-CN', 'hi', 'ar', 'ru', 'tl', 'vi'];
                
                    if (userLang !== 'en' && supportedLanguages.includes(userLang)) {
                        const teCombo = document.querySelector('.goog-te-combo');
                        if (teCombo && teCombo.options.length > 1) {
                            const currentLangCookie = document.cookie.match(/googtrans=([^\;]+)/);
                            if (!currentLangCookie || currentLangCookie[1].endsWith('/en')) {
                                 changeGoogleTranslateLanguage(userLang);
                            }
                        } else {
                            setTimeout(attemptTranslation, 300);
                        }
                    }
                };
                
                setTimeout(attemptTranslation, 500);
            },

            // --- UI & Animations ---
            initScrollAnimations() {
                this.observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('is-visible');
                            this.observer.unobserve(entry.target);
                        }
                    });
                }, { threshold: 0.1 });
                
                document.querySelectorAll('.animate-on-scroll').forEach(el => this.observer.observe(el));
            },

            scheduleSocialProof() {
                clearTimeout(this.urgencyState.socialProofTimeout);
                this.urgencyState.socialProofTimeout = setTimeout(() => {
                    this.triggerSocialProof();
                }, 15000);
            },

            triggerSocialProof() {
                this.showSocialProofNotification();
                this.urgencyState.socialProofTimeout = setTimeout(() => {
                    this.triggerSocialProof();
                }, Math.random() * (120000 - 45000) + 45000);
            },

            showSocialProofNotification() {
                if (this.state.isDialogActive) return;
                const socialProofData = { 
                    "br": { names: ["Lucas", "Gabriel", "Juliana"], cities: ["São Paulo", "Rio de Janeiro"], flag: "🇧🇷"}, 
                    "us": { names: ["James", "Michael", "Jessica"], cities: ["New York", "Miami"], flag: "🇺🇸" },
                    "es": { names: ["Javier", "Diego", "Sofia"], cities: ["Madrid", "Barcelona"], flag: "🇪🇸" }
                };
                const langKey = (this.state.userCountryCode || 'US').toLowerCase();
                const data = socialProofData[langKey] || socialProofData['us'];
                const name = data.names[Math.floor(Math.random() * data.names.length)];
                const location = data.cities[Math.floor(Math.random() * data.cities.length)];
                const app = this.platforms[Math.floor(Math.random() * this.platforms.length)].name;
                const text = `🎉 ${name} from ${location} just activated Reveal App for ${app}!`;
                
                const notification = document.createElement('div');
                notification.className = 'social-proof-notification bg-background-light border border-gray-700 rounded-lg p-4 shadow-lg flex items-center space-x-3 mb-3';
                notification.innerHTML = `<div>${data.flag} ${text}</div>`;
                
                this.dom.socialProofContainer.appendChild(notification);
                setTimeout(() => notification.classList.add('show'), 100);
                setTimeout(() => {
                    notification.classList.remove('show');
                    setTimeout(() => notification.remove(), 500);
                }, 6000);
            },

            initConsistentCounters() {
                const now = new Date();
                const startOfYear = new Date(now.getFullYear(), 0, 1);
                const dayOfYear = Math.floor((now - startOfYear) / (1000 * 60 * 60 * 24));
                const hourOfYear = dayOfYear * 24 + now.getUTCHours();

                const activePlayers = 1284 + Math.floor(hourOfYear / 4);
                if (this.dom.counterPlayers) {
                    this.dom.counterPlayers.textContent = `+${activePlayers.toLocaleString('en-US')}`;
                }

                const baseWinnings = 150000;
                const weeklyWinnings = baseWinnings + ((dayOfYear * 137) % 5000) + (now.getUTCHours() * 20);
                if (this.dom.counterWinnings) {
                    this.dom.counterWinnings.textContent = `$${Math.floor(weeklyWinnings / 1000)}K+`;
                }

                if (this.dom.counterSatisfaction) this.dom.counterSatisfaction.textContent = `98.7%`;
            },
            
            initUrgencyFeatures() {
                this.updateLiveViewers = () => {
                    const twoMinuteIntervals = Math.floor(Date.now() / (1000 * 120));
                    const baseViewers = 40;
                    const fluctuation = twoMinuteIntervals % 25; 
                    if (this.dom.liveViewersCount) {
                        this.dom.liveViewersCount.textContent = baseViewers + fluctuation;
                    }
                };

                this.updateLicensesLeft = () => {
                    const now = new Date();
                    const startOfDayUTC = new Date(Date.UTC(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate()));
                    const secondsPassedUTC = (now.getTime() - startOfDayUTC.getTime()) / 1000;
                    const secondsInDay = 86400;
                    
                    const daySeed = startOfDayUTC.getDate();
                    const startLicenses = 15 + (daySeed % 4); 
                    
                    const percentageOfDayPassed = secondsPassedUTC / secondsInDay;
                    const licensesSold = Math.floor(startLicenses * percentageOfDayPassed);
                    
                    const licensesLeft = Math.max(0, startLicenses - licensesSold);
                    if (this.dom.slotsLeftMain) {
                        this.dom.slotsLeftMain.textContent = licensesLeft;
                    }
                };

                this.updateLiveViewers();
                this.updateLicensesLeft();
                this.urgencyState.viewersInterval = setInterval(this.updateLiveViewers, 120000); 
                this.urgencyState.slotsInterval = setInterval(this.updateLicensesLeft, 60000); 
            },

            initRotatingTestimonials() {
                const dayOfYear = Math.floor((new Date() - new Date(new Date().getFullYear(), 0, 1)) / (1000 * 60 * 60 * 24));
                const startIndex = (dayOfYear * 3) % this.allTestimonials.length;
                
                let testimonialsHTML = '';
                for (let i = 0; i < 3; i++) {
                    const testimonial = this.allTestimonials[(startIndex + i) % this.allTestimonials.length];
                    const delay = i * 200;
                    testimonialsHTML += `
                        <div class="testimonial-card animate-on-scroll p-8 rounded-2xl relative overflow-hidden">
                            <i class="fas fa-quote-left quote-icon" aria-hidden="true"></i>
                            <p class="text-gray-300 mb-6 text-lg relative z-10">"${testimonial.quote}"</p>
                            <div class="flex items-center relative z-10">
                                <img loading="lazy" src="https://i.pravatar.cc/48?u=${testimonial.author.replace(/\s/g, '')}" class="w-12 h-12 rounded-full mr-4" alt="User photo for ${testimonial.author}">
                                <div>
                                    <p class="font-semibold text-lg">${testimonial.author}</p>
                                    <div class="flex items-center gap-2">
                                        <p class="text-sm text-gray-400">${testimonial.location}</p>
                                        <span class="verified-badge">✓ Verified</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                }
                const container = this.dom.testimonialsContainer;
                if(container) {
                    container.innerHTML = testimonialsHTML;
                    container.querySelectorAll('.animate-on-scroll').forEach(el => {
                        if (this.observer) {
                            this.observer.observe(el);
                        }
                    });
                }
            },

            initActivityFeed() {
                const feed = this.dom.activityFeed;
                if (!feed) return;
                
                clearInterval(this.state.activityFeedInterval);

                const seededRandom = (seed) => {
                    let state = seed;
                    return () => {
                        state = (state * 1103515245 + 12345) % 2147483648;
                        return state / 2147483648;
                    };
                };

                const activityTemplates = [
                    { icon: '🏆', text: 'Player from {flag} just won a {amount} pot on {platform}!' },
                    { icon: '✅', text: 'New user from {flag} activated Total Vision for {platform}.' },
                    { icon: '💡', text: 'Opponent Insight helped a player in {flag} make a crucial laydown on {platform}.' },
                    { icon: '💰', text: 'Player from {flag} cashed out +{amount} today using Reveal App on {platform}.' }
                ];
                const countryCodes = Object.keys(this.countrySalaryData);

                const generateActivityItem = (seed) => {
                    const random = seededRandom(seed);
                    
                    const template = activityTemplates[Math.floor(random() * activityTemplates.length)];
                    const countryCode = countryCodes[Math.floor(random() * countryCodes.length)];
                    const flag = countryCode.toUpperCase().replace(/./g, char => String.fromCodePoint(char.charCodeAt(0) + 127397));
                    const amount = this.formatLocalCurrency(Math.floor(random() * (2500 - 150 + 1) + 150), true);
                    const platform = this.platforms[Math.floor(random() * this.platforms.length)].name;

                    let text = template.text.replace('{flag}', flag).replace('{platform}', platform).replace('{amount}', amount);
                    
                    const time = new Date(seed * 30000);

                    const item = document.createElement('div');
                    item.className = 'activity-item';
                    item.innerHTML = `
                        <div class="flex items-center gap-4">
                            <span class="text-2xl">${template.icon}</span>
                            <div class="flex-1">
                                <p class="text-gray-300">${text}</p>
                                <p class="text-xs text-gray-500">${time.toLocaleTimeString()}</p>
                            </div>
                        </div>
                    `;
                    return item;
                };

                const updateFeed = () => {
                    const currentInterval = Math.floor(Date.now() / 30000);
                    const newItem = generateActivityItem(currentInterval);
                    
                    feed.insertBefore(newItem, feed.firstChild);

                    while (feed.children.length > 15) {
                        feed.removeChild(feed.lastChild);
                    }
                };

                feed.innerHTML = '';
                const initialInterval = Math.floor(Date.now() / 30000);
                for (let i = 14; i >= 0; i--) {
                    const item = generateActivityItem(initialInterval - i);
                    feed.appendChild(item);
                }
                
                this.state.activityFeedInterval = setInterval(updateFeed, 30000);
            },


            updatePricingCards() {
                const pricingCards = document.querySelectorAll('#pricing .pricing-card');
                if (!pricingCards.length) return;

                pricingCards.forEach(card => {
                    const tier = parseInt(card.dataset.tier);
                    if (!tier) return;

                    let priceUSD = this.calculateMonthlyPrice(tier, 'PPPOKER'); 
                    let billingCycleText = '/ month';

                    if (this.state.isQuarterlyBilling) {
                        priceUSD *= 2.5;
                        billingCycleText = '/ quarter';
                    }
                    
                    const formattedPrice = this.formatLocalCurrency(priceUSD);
                    const priceContainer = card.querySelector('.my-4');
                    let priceFontSizeClass = 'text-4xl md:text-5xl';
                    if (formattedPrice.length > 15) {
                        priceFontSizeClass = 'text-3xl md:text-4xl';
                    } else if (formattedPrice.length > 11) {
                        priceFontSizeClass = 'text-4xl';
                    }

                    if (priceContainer) {
                        priceContainer.innerHTML = `
                            <p class="text-gray-400 text-sm">Starts from</p>
                            <div class="flex items-baseline justify-center gap-x-2">
                                <span class="${priceFontSizeClass} font-extrabold text-white leading-tight">${formattedPrice}</span>
                                <span class="text-gray-400 font-medium">${billingCycleText}</span>
                            </div>
                        `;
                    }
                });
            },

            showDialog(content) {
                this.state.isDialogActive = true;
                this.dom.dialogContainer.innerHTML = `<div class="dialog-content w-full max-w-2xl p-6 sm:p-8 rounded-2xl">${content}</div>`;
                this.dom.dialogContainer.classList.remove('hidden');
            },

            closeDialog() {
                this.dom.dialogContainer.classList.add('hidden');
                this.state.isDialogActive = false;
                clearInterval(this.urgencyState.priceTimerInterval);
            },
            
            // --- Purchase Flow ---
            startPurchaseFlow(tier = null) {
                 this.purchaseState.cheatTier = tier ? parseInt(tier) : null;
                 if (localStorage.getItem('userEmail')) {
                      this.purchaseState.email = localStorage.getItem('userEmail');
                      this.showPlatformDialog();
                 } else {
                      this.showRegistrationDialog();
                 }
            },

            showRegistrationDialog() {
                const content = `
                    <div class="mb-4">
                        <div class="progress-bar-container w-full"><div class="progress-bar" style="width: 10%;"></div></div>
                        <p class="text-center text-sm text-gray-400 mt-2">Step 1 of 6</p>
                    </div>
                    <h3 class="text-2xl font-bold mb-6 text-center">Register to Select Your Plan</h3>
                    <div class="space-y-4">
                        <div>
                            <label for="email-input" class="block mb-2 text-sm font-medium text-gray-300">Email Address</label>
                            <input type="email" id="email-input" class="bg-gray-700 border border-gray-600 text-white text-sm rounded-lg block w-full p-2.5" placeholder="Enter your email" required value="${localStorage.getItem('userEmail') || ''}">
                            <p id="email-error" class="text-red-500 text-sm mt-1 h-4"></p>
                        </div>
                        <button id="register-btn" class="w-full cta-button font-bold py-3 rounded-lg">Continue</button>
                    </div>`;
                this.showDialog(content);
                document.getElementById('register-btn').onclick = () => this.submitRegistration();
            },

            submitRegistration() {
                const emailInput = document.getElementById('email-input');
                const emailError = document.getElementById('email-error');
                let isValid = true;

                if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(emailInput.value)) {
                    emailError.textContent = "Please enter a valid email address.";
                    isValid = false;
                } else { emailError.textContent = ''; }

                if (isValid) {
                    localStorage.setItem('userEmail', emailInput.value);
                    this.purchaseState.email = emailInput.value;
                    this.showPlatformDialog();
                }
            },
            
            updateUserStateFromCountry(countryCode, isGeoDetection = false) {
                if (!countryCode || !this.state.currencyRates) return;
                const countryData = this.countrySalaryData[countryCode];
                if (countryData) {
                    this.state.userCountryCode = countryCode;
                    this.state.userCountryName = new Intl.DisplayNames(['en'], { type: 'region' }).of(countryCode);
                    this.state.userCountryFlag = countryCode.toUpperCase().replace(/./g, char => String.fromCodePoint(char.charCodeAt(0) + 127397));
                    
                    const currencyCode = countryData.c || 'USD';
                    this.state.userCurrencyCode = currencyCode;
                    this.state.usdToLocalRate = this.state.currencyRates[currencyCode] || 1;
                    
                    try {
                        this.state.userCurrencySymbol = (0).toLocaleString('en', { style: 'currency', currency: currencyCode, minimumFractionDigits: 0, maximumFractionDigits: 0 }).replace(/0/g, '').trim();
                    } catch (e) {
                        this.state.userCurrencySymbol = '$'; // Fallback
                    }
                }
            },

            formatLocalCurrency(usdValue, noCents = false) {
                try {
                    const localValue = usdValue * this.state.usdToLocalRate;
                    const lang = (this.state.userCountryCode || 'US').toLowerCase();
                    const locale = lang === 'br' ? 'pt-BR' : `en-${this.state.userCountryCode}`;

                    return new Intl.NumberFormat(locale, {
                        style: 'currency',
                        currency: this.state.userCurrencyCode,
                        minimumFractionDigits: noCents ? 0 : 2,
                        maximumFractionDigits: noCents ? 0 : 2,
                    }).format(localValue);
                } catch (error) {
                    return new Intl.NumberFormat('en-US', {
                        style: 'currency',
                        currency: 'USD',
                        minimumFractionDigits: noCents ? 0 : 2,
                        maximumFractionDigits: noCents ? 0 : 2,
                    }).format(usdValue);
                }
            },
            
            calculateMonthlyPrice(tier, platformId) {
                const countryCode = this.state.userCountryCode || 'US';
                const baseSalary = this.countrySalaryData[countryCode]?.s || 1001; // Default to > 1000 salary
                let percentage;
                const minimumPrice = 350;

                const isPremium = this.premiumPlatforms.includes(platformId);
                const isSuperPremium = this.superPremiumPlatforms.includes(platformId);

                if (isSuperPremium) {
                    percentage = baseSalary > 1000 ? 0.35 : 0.40;
                } else if (isPremium) {
                    percentage = 0.30;
                } else {
                    percentage = 0.20;
                }
                
                let calculatedPrice = baseSalary * percentage;
                let basePriceBeforeTiers = Math.max(minimumPrice, calculatedPrice);
                
                let finalPrice = basePriceBeforeTiers;
                if (tier === 2) finalPrice *= 1.8;
                if (tier === 3) finalPrice *= 2.2;

                return finalPrice;
            },

            calculatePrice() {
                const primaryPlatform = this.purchaseState.platforms[0];
                const monthlyPrice = this.calculateMonthlyPrice(this.purchaseState.cheatTier, primaryPlatform);
                this.purchaseState.monthlyPriceUSD = monthlyPrice;

                let finalPrice = monthlyPrice;
                if (this.state.isQuarterlyBilling) {
                    finalPrice *= 2.5; // 3 months with a small discount
                }

                this.purchaseState.basePriceUSD = finalPrice;
            },

            showPlatformDialog() {
                const platformButtons = this.platforms.map(p => `
                    <button data-platform="${p.id}" class="selection-button app-btn font-semibold py-3 rounded-lg flex flex-col items-center justify-center gap-2 h-28">
                        <img loading="lazy" src="${p.logo}" alt="${p.name} logo" class="h-12 w-12 object-contain mb-1 rounded-md bg-white/10 p-1">
                        <span class="text-xs text-center">${p.name}</span>
                    </button>
                `).join('');

                const content = `
                    <div class="mb-4">
                        <div class="progress-bar-container w-full"><div class="progress-bar" style="width: 25%;"></div></div>
                        <p class="text-center text-sm text-gray-400 mt-2">Step 2 of 6</p>
                    </div>
                    <h3 class="text-2xl font-bold mb-6 text-center">Select Your Setup</h3>
                    
                    <div class="mb-6">
                        <p class="text-center text-gray-400 mb-2 font-semibold">1. Choose Operating System</p>
                        <div class="grid grid-cols-2 gap-4">
                            <button data-os="Android" class="selection-button os-btn font-semibold py-3 rounded-lg flex items-center justify-center gap-2"><i class="fab fa-android"></i> Android</button>
                            <button data-os="iOS" class="selection-button os-btn font-semibold py-3 rounded-lg flex items-center justify-center gap-2"><i class="fab fa-apple"></i> iOS</button>
                        </div>
                         <p id="os-error" class="text-red-500 text-sm mt-1 h-4 text-center"></p>
                    </div>

                    <div>
                        <p class="text-center text-gray-400 mb-2 font-semibold">2. Choose Your Primary Poker Platform</p>
                        <div class="grid grid-cols-3 sm:grid-cols-5 gap-4">
                            ${platformButtons}
                        </div>
                        <p id="platform-error" class="text-red-500 text-sm mt-1 h-4 text-center"></p>
                    </div>
                    <button id="platform-continue-btn" class="w-full cta-button font-bold py-3 rounded-lg mt-8">Continue</button>
                `;
                this.showDialog(content);
                
                document.querySelectorAll('.os-btn').forEach(btn => btn.onclick = (e) => {
                    this.purchaseState.os = e.currentTarget.dataset.os;
                    document.querySelectorAll('.os-btn').forEach(b => b.classList.remove('selected'));
                    e.currentTarget.classList.add('selected');
                });
                document.querySelectorAll('.app-btn').forEach(btn => btn.onclick = (e) => {
                    this.purchaseState.platforms = [e.currentTarget.dataset.platform];
                    document.querySelectorAll('.app-btn').forEach(b => b.classList.remove('selected'));
                    e.currentTarget.classList.add('selected');
                });

                document.getElementById('platform-continue-btn').onclick = () => {
                    let isValid = true;
                    if (!this.purchaseState.os) {
                        document.getElementById('os-error').textContent = 'Please select an OS.';
                        isValid = false;
                    } else {
                         document.getElementById('os-error').textContent = '';
                    }
                    if (this.purchaseState.platforms.length === 0) {
                        document.getElementById('platform-error').textContent = 'Please select a platform.';
                        isValid = false;
                    } else {
                        document.getElementById('platform-error').textContent = '';
                    }

                    if(isValid) {
                        if (this.purchaseState.cheatTier) {
                            this.calculatePrice();
                            this.showUpsellDialog();
                        } else {
                            this.showCheatSelectionDialog();
                        }
                    }
                };
            },

            showCheatSelectionDialog() {
                const content = `
                    <div class="mb-4">
                        <div class="progress-bar-container w-full"><div class="progress-bar" style="width: 40%;"></div></div>
                        <p class="text-center text-sm text-gray-400 mt-2">Step 3 of 6</p>
                    </div>
                    <h3 class="text-2xl font-bold mb-6 text-center">Choose Your Advantage Level</h3>
                    <div class="space-y-4">
                        <div data-tier="1" class="selection-button cheat-tier-btn p-4 rounded-lg">
                            <h4 class="font-bold text-lg text-primary-color">Board Reader</h4>
                            <p class="text-sm text-gray-300">See the Flop, Turn, and River cards in advance.</p>
                        </div>
                        <div data-tier="2" class="selection-button cheat-tier-btn p-4 rounded-lg">
                            <h4 class="font-bold text-lg text-primary-color">Opponent Insight</h4>
                            <p class="text-sm text-gray-300">See your opponents' hole cards.</p>
                        </div>
                        <div data-tier="3" class="selection-button cheat-tier-btn p-4 rounded-lg">
                            <h4 class="font-bold text-lg text-primary-color">Total Vision</h4>
                            <p class="text-sm text-gray-300">See ALL cards: board and opponents. The ultimate advantage.</p>
                        </div>
                    </div>
                    <p id="tier-error" class="text-red-500 text-sm mt-2 h-4 text-center"></p>
                    <button id="cheat-tier-continue-btn" class="w-full cta-button font-bold py-3 rounded-lg mt-6">Continue</button>
                `;
                this.showDialog(content);

                document.querySelectorAll('.cheat-tier-btn').forEach(btn => btn.onclick = (e) => {
                    this.purchaseState.cheatTier = parseInt(e.currentTarget.dataset.tier);
                    document.querySelectorAll('.cheat-tier-btn').forEach(b => b.classList.remove('selected'));
                    e.currentTarget.classList.add('selected');
                });

                document.getElementById('cheat-tier-continue-btn').onclick = () => {
                    if (this.purchaseState.cheatTier) {
                        this.calculatePrice();
                        this.showUpsellDialog();
                    } else {
                        document.getElementById('tier-error').textContent = 'Please select an advantage level.';
                    }
                };
            },

            showUpsellDialog() {
                this.purchaseState.upsells = { additionalPlatforms: [], support: false, annual: false };
                this.purchaseState.coupon = { code: null, discount: 0 };
                this.calculatePrice();

                const basePrice = this.purchaseState.basePriceUSD;
                const isSupportMandatory = basePrice < 800;
                if (isSupportMandatory) {
                    this.purchaseState.upsells.support = true;
                }
                
                const primaryPlatform = this.purchaseState.platforms[0];
                const availablePlatformsForUpsell = this.platforms.filter(p => p.id !== primaryPlatform);
                const platformUpsellButtons = availablePlatformsForUpsell.map(p => `
                    <button data-platform-id="${p.id}" class="selection-button platform-upsell-btn font-semibold py-2 px-3 rounded-lg flex flex-col items-center justify-center gap-1 text-xs">
                         <img loading="lazy" src="${p.logo}" alt="${p.name} logo" class="h-8 w-8 object-contain mb-1 rounded-md bg-white/10 p-1">
                         <span>${p.name}</span>
                    </button>
                `).join('');

                const content = `
                    <div class="mb-4">
                        <div class="progress-bar-container w-full"><div class="progress-bar" style="width: 75%;"></div></div>
                        <p class="text-center text-sm text-gray-400 mt-2">Step 4 of 6: Optional Add-ons</p>
                    </div>
                    <h3 class="text-2xl font-bold mb-2 text-center text-primary-color">Boost Your Advantage!</h3>
                    <p class="text-center text-gray-400 mb-6">The biggest winners use more than one platform and don't waste time with support. Do you want to be left behind or truly dominate?</p>
                    
                    <div class="space-y-4 mb-6">
                        <!-- Platform Upsell -->
                        <div id="upsell-platforms-container" class="upsell-option p-4 rounded-lg">
                            <h4 class="font-bold"><i class="fas fa-layer-group mr-2"></i>Add More Platforms</h4>
                            <p id="platform-upsell-price-display" class="text-sm text-gray-400 mb-4"></p>
                            <div class="grid grid-cols-4 sm:grid-cols-7 gap-2">
                                ${platformUpsellButtons}
                            </div>
                             <p id="platform-upsell-error" class="text-red-500 text-xs mt-2 h-4 text-center"></p>
                        </div>

                        <!-- Support Upsell -->
                        <div id="upsell-support" class="upsell-option p-4 rounded-lg flex items-center justify-between ${isSupportMandatory ? 'opacity-50 pointer-events-none selected' : ''}">
                            <div>
                                <h4 class="font-bold"><i class="fas fa-headset mr-2"></i>Priority VIP Support</h4>
                                <p class="text-sm text-gray-400">Get assisted installation and instant 24/7 help. ${isSupportMandatory ? '(Mandatory for this plan)' : ''}</p>
                            </div>
                            <span id="support-price-display" class="font-bold text-lg text-secondary-color"></span>
                        </div>
                        
                        <!-- Annual Upsell -->
                        <div id="upsell-annual" class="upsell-option p-4 rounded-lg">
                            <div class="flex items-center justify-between">
                               <div>
                                    <h4 class="font-bold text-primary-color"><i class="fas fa-calendar-check mr-2"></i>ALL-ACCESS ANNUAL</h4>
                                    <p class="text-sm text-gray-400">Pay once for 12 months and get a huge discount.</p>
                                </div>
                                <span class="font-bold text-lg text-primary-color" id="annual-price-display"></span>
                            </div>
                             <p class="text-sm text-center mt-2 text-gray-400">Save Big! Regular price: <span id="annual-full-price" class="line-through"></span></p>
                        </div>
                    </div>

                     <div class="mt-4">
                        <label for="coupon-input" class="text-sm text-gray-400">Discount Code</label>
                        <div class="flex gap-2 mt-1">
                            <input type="text" id="coupon-input" class="bg-gray-200 border border-gray-400 text-gray-900 text-sm rounded-lg block w-full p-2.5 placeholder-gray-500" placeholder="Enter code">
                            <button id="apply-coupon-btn" class="btn-secondary font-bold py-2 px-4 rounded-lg">Apply</button>
                        </div>
                        <p id="coupon-feedback" class="text-sm mt-1 h-4"></p>
                    </div>
                    
                    <div class="border-t border-gray-700 pt-4 mt-4 text-sm space-y-2">
                         <div id="discount-row" class="hidden flex justify-between text-secondary-color">
                            <span>Discount (<span id="coupon-code-display"></span>):</span>
                            <span id="discount-amount-display"></span>
                        </div>
                         <div class="flex justify-between items-center text-xl font-bold mt-2">
                            <span>Total Due Today:</span>
                            <span id="total-price-display"></span>
                        </div>
                    </div>

                    <div class="mt-8 flex flex-col gap-4">
                        <button id="upsell-continue-btn" class="w-full cta-button font-bold py-3 rounded-lg">Continue to Payment</button>
                        <button id="upsell-skip-btn" class="w-full text-gray-400 hover:text-white transition">No thanks, I'll stick to the basic plan</button>
                    </div>
                `;
                this.showDialog(content);
                document.getElementById('apply-coupon-btn').onclick = () => this.applyCoupon();
                
                const platformButtons = document.querySelectorAll('.platform-upsell-btn');
                platformButtons.forEach(btn => {
                    btn.onclick = (e) => {
                        const platformId = e.currentTarget.dataset.platformId;
                        const errorEl = document.getElementById('platform-upsell-error');
                        errorEl.textContent = '';
                        const isSelected = this.purchaseState.upsells.additionalPlatforms.includes(platformId);

                        if (isSelected) {
                            this.purchaseState.upsells.additionalPlatforms = this.purchaseState.upsells.additionalPlatforms.filter(p => p !== platformId);
                            e.currentTarget.classList.remove('selected');
                        } else {
                            if (this.purchaseState.upsells.additionalPlatforms.length < 2) {
                                this.purchaseState.upsells.additionalPlatforms.push(platformId);
                                e.currentTarget.classList.add('selected');
                            } else {
                                errorEl.textContent = 'You can select a maximum of 2 additional platforms.';
                            }
                        }
                        this.updateUpsellTotalDisplay();
                    };
                });

                document.getElementById('upsell-support').onclick = (e) => {
                    if (isSupportMandatory || this.purchaseState.upsells.annual) return;
                    e.currentTarget.classList.toggle('selected');
                    this.purchaseState.upsells.support = !this.purchaseState.upsells.support;
                    this.updateUpsellTotalDisplay();
                };
                document.getElementById('upsell-annual').onclick = (e) => {
                    e.currentTarget.classList.toggle('selected');
                    this.purchaseState.upsells.annual = !this.purchaseState.upsells.annual;
                    
                    if (this.purchaseState.upsells.annual) {
                        this.purchaseState.upsells.support = true;
                    } else {
                        this.purchaseState.upsells.support = isSupportMandatory;
                         if(!isSupportMandatory) {
                             document.getElementById('upsell-support').classList.remove('selected');
                         }
                    }
                    this.updateUpsellTotalDisplay();
                };
                
                document.getElementById('upsell-continue-btn').onclick = () => this.showPaymentMethodDialog();
                document.getElementById('upsell-skip-btn').onclick = () => {
                    this.purchaseState.upsells = { additionalPlatforms: [], support: isSupportMandatory, annual: false };
                    this.updateUpsellTotalDisplay(); // Recalculate with skipped upsells
                    this.showPaymentMethodDialog();
                };

                this.updateUpsellTotalDisplay();
            },
            
            updateUpsellTotalDisplay() {
                const supportPriceUSD = 49.99;
                const basePrice = this.purchaseState.basePriceUSD;
                const isSupportMandatory = basePrice < 800;

                let totalUSD = 0;
                const numSelectedPlatforms = this.purchaseState.upsells.additionalPlatforms.length;
                
                const monthlyBase = this.purchaseState.monthlyPriceUSD;
                const annualBase = monthlyBase * 8;
                
                let platformUpsellCost = 0;
                if (numSelectedPlatforms === 1) {
                    platformUpsellCost = this.purchaseState.upsells.annual ? annualBase * 0.80 : monthlyBase * 0.80;
                } else if (numSelectedPlatforms === 2) {
                    platformUpsellCost = this.purchaseState.upsells.annual ? annualBase * 1.25 : monthlyBase * 1.25;
                }

                if (this.purchaseState.upsells.annual) {
                    totalUSD = annualBase + platformUpsellCost;
                    this.purchaseState.upsells.support = true; 
                    document.getElementById('upsell-support').classList.add('selected', 'opacity-50', 'pointer-events-none');
                } else {
                    totalUSD = this.purchaseState.basePriceUSD + platformUpsellCost;
                     if (!isSupportMandatory) {
                         document.getElementById('upsell-support').classList.remove('opacity-50', 'pointer-events-none');
                     }
                    if (this.purchaseState.upsells.support) {
                        totalUSD += supportPriceUSD;
                    }
                }
                
                const preDiscountTotal = totalUSD;
                if(this.purchaseState.coupon.discount > 0) {
                    totalUSD *= (1 - this.purchaseState.coupon.discount);
                }
                
                const discountAmount = preDiscountTotal - totalUSD;
                const discountRow = document.getElementById('discount-row');
                if (discountAmount > 0) {
                    document.getElementById('coupon-code-display').textContent = this.purchaseState.coupon.code.toUpperCase();
                    document.getElementById('discount-amount-display').textContent = `- ${this.formatLocalCurrency(discountAmount)}`;
                    discountRow.classList.remove('hidden');
                } else {
                    discountRow.classList.add('hidden');
                }

                let platformPriceText = `Add 1 for +${this.formatLocalCurrency(monthlyBase * 0.80)}, or 2 for +${this.formatLocalCurrency(monthlyBase * 1.25)}.`;
                if(this.purchaseState.upsells.annual) {
                    platformPriceText = `Add 1 for +${this.formatLocalCurrency(annualBase * 0.80)}, or 2 for +${this.formatLocalCurrency(annualBase * 1.25)}.`;
                }
                document.getElementById('platform-upsell-price-display').innerHTML = platformPriceText;
                
                let annualDisplayPrice = annualBase;
                let annualFullPrice = this.purchaseState.monthlyPriceUSD * 12;
                if(numSelectedPlatforms === 1) { annualDisplayPrice += annualBase * 0.80; annualFullPrice += monthlyBase * 12 * 0.80; }
                if(numSelectedPlatforms === 2) { annualDisplayPrice += annualBase * 1.25; annualFullPrice += monthlyBase * 12 * 1.25; }
                document.getElementById('annual-price-display').textContent = `+${this.formatLocalCurrency(annualDisplayPrice)}`;
                document.getElementById('annual-full-price').textContent = this.formatLocalCurrency(annualFullPrice);
                document.getElementById('support-price-display').textContent = `+${this.formatLocalCurrency(supportPriceUSD)}`;

                this.purchaseState.finalPriceUSD = totalUSD;
                document.getElementById('total-price-display').textContent = `${this.formatLocalCurrency(totalUSD)} ${this.state.userCurrencyCode}`;
            },
            
            applyCoupon() {
                const input = document.getElementById('coupon-input');
                const feedback = document.getElementById('coupon-feedback');
                const code = input.value.trim().toLowerCase();
                let applied = false;
                feedback.textContent = '';

                this.purchaseState.coupon = { code: null, discount: 0 };

                if (code === 'hack10off') {
                    this.purchaseState.coupon = { code: 'hack10off', discount: 0.10 };
                    applied = true;
                } else if (code === 'heck15off') {
                    this.purchaseState.coupon = { code: 'heck15off', discount: 0.15 };
                    applied = true;
                } else if (code === 'heck30off') {
                    if (this.purchaseState.upsells.annual && this.purchaseState.upsells.additionalPlatforms.length === 1) {
                         this.purchaseState.coupon = { code: 'heck30off', discount: 0.30 };
                         applied = true;
                    } else {
                        feedback.textContent = 'Coupon valid only for annual plan with 1 extra platform.';
                        feedback.className = 'text-red-500 text-sm mt-1 h-4';
                    }
                } else if (code === 'heck50off') {
                    if (this.purchaseState.upsells.annual && this.purchaseState.upsells.additionalPlatforms.length === 2) {
                        this.purchaseState.coupon = { code: 'heck50off', discount: 0.50 };
                        applied = true;
                    } else {
                        feedback.textContent = 'Coupon valid only for annual plan with 2 extra platforms.';
                        feedback.className = 'text-red-500 text-sm mt-1 h-4';
                    }
                }

                if (applied) {
                    feedback.textContent = `Coupon "${code.toUpperCase()}" applied!`;
                    feedback.className = 'text-secondary-color text-sm mt-1 h-4';
                } else if (!feedback.textContent) {
                    feedback.textContent = 'Invalid coupon code.';
                    feedback.className = 'text-red-500 text-sm mt-1 h-4';
                }
                
                this.updateUpsellTotalDisplay();
            },


            showPaymentMethodDialog() {
                this.purchaseState.uniqueId = this.generateUniqueId();
                const finalPriceWithCents = parseFloat(this.purchaseState.finalPriceUSD.toFixed(0)) + (parseInt(this.purchaseState.uniqueId.slice(-2), 10) / 100);
                this.purchaseState.finalPriceUSD = finalPriceWithCents;

                let priceDisplayHTML = `<p class="text-4xl font-bold text-primary-color">${this.formatLocalCurrency(this.purchaseState.finalPriceUSD)}</p><p class="text-sm text-gray-400">(Network fees will be added)</p>`;

                const content = `
                    <div class="mb-4">
                        <div class="progress-bar-container w-full"><div class="progress-bar" style="width: 90%;"></div></div>
                        <p class="text-center text-sm text-gray-400 mt-2">Step 5 of 6</p>
                    </div>
                    <h3 class="text-2xl font-bold mb-2 text-center">Select Payment Method</h3>
                    <div class="text-center mb-4">
                        ${priceDisplayHTML}
                        <div class="text-center text-red-500 font-semibold mt-2">
                            <i class="fas fa-clock"></i>
                            <span>Your price is reserved for:</span>
                            <span id="price-timer" class="ml-1">15:00</span>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 sm:grid-cols-3 gap-4 text-center">
                        <button data-crypto="btc" class="selection-button crypto-button p-3 rounded-lg flex flex-col items-center justify-center h-24">
                            <img loading="lazy" src="https://img.icons8.com/color/48/000000/bitcoin--v1.png" class="h-8 w-8 mx-auto mb-1" alt="Bitcoin">
                            <span class="text-sm font-semibold">BTC</span>
                            <span class="text-xs text-gray-400">Bitcoin Network</span>
                        </button>
                        <button data-crypto="eth" class="selection-button crypto-button p-3 rounded-lg flex flex-col items-center justify-center h-24">
                             <img loading="lazy" src="https://img.icons8.com/color/48/000000/ethereum.png" class="h-8 w-8 mx-auto mb-1" alt="Ethereum">
                            <span class="text-sm font-semibold">ETH</span>
                            <span class="text-xs text-gray-400">ERC20 Network</span>
                        </button>
                        <button data-crypto="usdt" class="selection-button crypto-button p-3 rounded-lg flex flex-col items-center justify-center h-24">
                             <img loading="lazy" src="https://img.icons8.com/color/48/000000/tether.png" class="h-8 w-8 mx-auto mb-1" alt="USDT">
                            <span class="text-sm font-semibold">USDT</span>
                            <span class="text-xs text-gray-400">TRC20 Network</span>
                        </button>
                        <button data-crypto="sol" class="selection-button crypto-button p-3 rounded-lg flex flex-col items-center justify-center h-24">
                             <img loading="lazy" src="https://img.icons8.com/nolan/64/solana.png" class="h-8 w-8 mx-auto mb-1" alt="Solana">
                            <span class="text-sm font-semibold">SOL</span>
                             <span class="text-xs text-gray-400">Solana Network</span>
                        </button>
                        <button data-crypto="xrp" class="selection-button crypto-button p-3 rounded-lg flex flex-col items-center justify-center h-24">
                             <img loading="lazy" src="https://img.icons8.com/color/48/xrp.png" class="h-8 w-8 mx-auto mb-1" alt="XRP">
                            <span class="text-sm font-semibold">XRP</span>
                             <span class="text-xs text-gray-400">Ripple Network</span>
                        </button>
                    </div>`;
                this.showDialog(content);
                this.startPriceReservationTimer(15 * 60);

                document.querySelectorAll('.crypto-button').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const cryptoMethod = e.currentTarget.dataset.crypto;
                        this.purchaseState.paymentMethod = cryptoMethod;
                        this.showPaymentDetailsDialog(cryptoMethod);
                    });
                });
            },
            
            startPriceReservationTimer(duration) {
                clearInterval(this.urgencyState.priceTimerInterval);
                let timer = duration;
                const display = document.getElementById('price-timer');
                this.urgencyState.priceTimerInterval = setInterval(() => {
                    let minutes = String(parseInt(timer / 60, 10)).padStart(2, '0');
                    let seconds = String(parseInt(timer % 60, 10)).padStart(2, '0');
                    if (display) display.textContent = `${minutes}:${seconds}`;
                    if (--timer < 0) {
                        clearInterval(this.urgencyState.priceTimerInterval);
                        this.closeDialog();
                    }
                }, 1000);
            },

            async showPaymentDetailsDialog(method) {
                const addresses = { 
                    usdt: "TXxRAVZP8fUJVm2yMTS8uei2AsgKtLviuK", 
                    btc: "bc1q983fl9ehgw88wqgs2k78vurrk2l2z6t6afphz3", 
                    eth: "0x9b5877A847BE203FCbA421194C83E0af6f686cC7",
                    sol: "2ec6P1d7zNQbmFs85FuDfDrUhWbuV8vC87XpxGq2oJV7",
                    xrp: "r4QRtFWqJXcjWk5s4ACN8ujagwK4AU4s6p"
                };
                const address = addresses[method];
                let cryptoAmountHTML = `
                    <div class="h-24 flex flex-col items-center justify-center">
                        <div class="spinner w-6 h-6"></div>
                        <p class="text-sm text-gray-400 mt-2">Calculating final amount...</p>
                    </div>`;
                
                const content = `
                     <div class="mb-4">
                        <div class="progress-bar-container w-full"><div class="progress-bar" style="width: 100%;"></div></div>
                        <p class="text-center text-sm text-gray-400 mt-2">Step 6 of 6</p>
                    </div>
                    <h3 class="text-2xl font-bold mb-4 text-center">Complete Your Payment</h3>
                    <div id="payment-amount-container" class="text-center mb-4 min-h-[56px] flex flex-col justify-center">${cryptoAmountHTML}</div>
                    <div id="qr-code-container" class="flex justify-center mb-4 p-2 bg-white rounded-lg w-48 h-48 mx-auto"></div>
                    <div class="bg-background-dark border border-gray-700 rounded-lg p-3 text-center">
                        <p class="text-xs text-gray-400 mb-2">Send the exact amount to this address:</p>
                        <p id="wallet-address-text" class="text-primary-color font-mono text-sm break-all mb-3">${address}</p>
                        <button id="copy-address" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition-all duration-200 flex items-center justify-center gap-2">
                            <i class="fas fa-copy"></i>
                            <span id="copy-address-text-span">Copy Address</span>
                        </button>
                    </div>
                    <button id="payment-done" class="mt-6 w-full cta-button font-bold py-3 rounded-lg">I Have Made the Payment</button>`;
                this.showDialog(content);

                document.getElementById('copy-address').onclick = () => this.copyToClipboard(address, 'copy-address-text-span');
                document.getElementById('payment-done').onclick = () => this.showFinalConfirmation();

                const cryptoPrice = await this.getCryptoPrice(method);
                const paymentAmountContainer = document.getElementById('payment-amount-container');
                const qrCodeContainer = document.getElementById('qr-code-container');
                
                if (cryptoPrice && paymentAmountContainer && qrCodeContainer) {
                    const originalPriceUSD = this.purchaseState.finalPriceUSD;
                    const feePercentage = (method === 'usdt') ? 0.06 : 0.01;
                    const feeAmountUSD = originalPriceUSD * feePercentage;
                    const totalWithFeeUSD = originalPriceUSD + feeAmountUSD;
                    
                    this.purchaseState.feeAmountUSD = feeAmountUSD;

                    const cryptoAmount = (totalWithFeeUSD / cryptoPrice).toFixed(method === 'usdt' ? 2 : 8);
                    this.purchaseState.cryptoAmountPaid = cryptoAmount;
                    
                    paymentAmountContainer.innerHTML = `
                        <div class="text-sm text-gray-400 text-right w-full max-w-xs mx-auto">
                            <div class="flex justify-between"><span>Subtotal:</span><span>${this.formatLocalCurrency(originalPriceUSD)} ${this.state.userCurrencyCode}</span></div>
                            <div class="flex justify-between"><span>Network Fee (${feePercentage * 100}%):</span><span>+ ${this.formatLocalCurrency(feeAmountUSD)} ${this.state.userCurrencyCode}</span></div>
                            <hr class="border-gray-600 my-1">
                            <div class="flex justify-between font-bold text-base text-white"><span>Total:</span><span>${this.formatLocalCurrency(totalWithFeeUSD)} ${this.state.userCurrencyCode}</span></div>
                        </div>
                        <p class="text-3xl font-bold text-primary-color tabular-nums mt-2">${cryptoAmount} ${method.toUpperCase()}</p>
                    `;
                    
                    let qrData = `${method}:${address}?amount=${cryptoAmount}`;
                    const qrUrl = `https://api.qrserver.com/v1/create-qr-code/?size=180x180&data=${encodeURIComponent(qrData)}`;
                    qrCodeContainer.innerHTML = `<img src="${qrUrl}" alt="${method.toUpperCase()} QR Code" class="w-full h-full">`;
                } else if (paymentAmountContainer) {
                    paymentAmountContainer.innerHTML = `<p class="text-red-400">Error fetching price. Please try again.</p>`;
                }
            },
            
            async getCryptoPrice(cryptoId) {
                const ids = { btc: 'bitcoin', eth: 'ethereum', usdt: 'tether', sol: 'solana', xrp: 'ripple' };
                try {
                    const response = await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${ids[cryptoId]}&vs_currencies=usd`);
                    if (!response.ok) return null;
                    const data = await response.json();
                    return data[ids[cryptoId]].usd;
                } catch (error) {
                    console.error("Crypto price fetch error:", error);
                    return null;
                }
            },

            copyToClipboard(text, feedbackSpanId) {
                navigator.clipboard.writeText(text).then(() => {
                    const el = document.getElementById(feedbackSpanId);
                    if (el) {
                        const originalText = el.textContent;
                        el.textContent = 'Copied!';
                        setTimeout(() => { el.textContent = originalText; }, 2000);
                    }
                }).catch(err => console.error('Copy failed', err));
            },

            generateUniqueId() {
                const countryCode = this.state.userCountryCode || 'XX';
                const now = new Date();
                const pad = (num) => String(num).padStart(2, '0');
                const timestamp = `${pad(now.getDate())}${pad(now.getMonth() + 1)}${now.getFullYear()}${pad(now.getHours())}${pad(now.getMinutes())}${pad(now.getSeconds())}`;
                return `${countryCode.toUpperCase()}-${timestamp}`;
            },

            showFinalConfirmation() {
                const { uniqueId, os, platforms, cheatTier, upsells, finalPriceUSD, cryptoAmountPaid, paymentMethod, coupon, feeAmountUSD } = this.purchaseState;
                const tierNames = {1: "Board Reader", 2: "Opponent Insight", 3: "Total Vision"};
                const totalWithFeeUSD = finalPriceUSD + (feeAmountUSD || 0);

                let message = `🚀 --- New Activation | Reveal App --- 🚀\n\n`;
                message += `🆔 Activation ID: ${uniqueId}\n`;
                message += `📧 Email: ${this.purchaseState.email}\n`;
                message += `📱 System: ${os}\n`;
                message += `⭐ Tier: ${tierNames[cheatTier]}\n`;

                let platformList = [...platforms, ...upsells.additionalPlatforms];
                let platformMessage;
                if (upsells.annual && upsells.additionalPlatforms.length === 0) {
                    platformMessage = `🃏 Platforms: All-Access Annual Pack (All Platforms)\n`;
                } else {
                    platformMessage = `🃏 Platforms: ${platformList.join(', ')}\n`;
                }
                message += platformMessage + '\n';
                
                message += `--- Payment Details ---\n`;
                message += `💰 Amount: ${cryptoAmountPaid} ${paymentMethod.toUpperCase()}\n`;
                message += `💵 Subtotal: ~$${finalPriceUSD.toFixed(2)} USD\n`;
                if (feeAmountUSD && feeAmountUSD > 0) {
                    const feePercentage = (paymentMethod === 'usdt' ? 6 : 1);
                    message += `🔌 Network Fee (${feePercentage}%): ~$${feeAmountUSD.toFixed(2)} USD\n`;
                }
                message += `💳 Total: ~$${totalWithFeeUSD.toFixed(2)} USD\n\n`;
                
                if (coupon && coupon.code) {
                    message += `🎟️ Coupon Used: ${coupon.code.toUpperCase()} (${coupon.discount * 100}% off)\n`;
                }

                const planType = upsells.annual ? 'Annual (Billed every 12 months)' : (this.state.isQuarterlyBilling ? 'Quarterly' : 'Monthly');
                message += `📅 Plan: ${planType}\n`;

                let hasSupport = upsells.support || upsells.annual;
                message += `🔧 Priority Support: ${hasSupport ? 'Yes' : 'No'}\n\n`;

                if (!upsells.annual) {
                    message += `--- ⚠️ IMPORTANT ⚠️ ---\n`;
                    message += `Your subscription is ${this.state.isQuarterlyBilling ? 'quarterly' : 'monthly'}.\n`;
                }
                message += `\nThank you for choosing Reveal App!`;

                const telegramUrl = `https://t.me/bedmalcon_temp?text=${encodeURIComponent(message)}`;

                const content = `
                    <div class="text-center">
                        <div class="text-6xl text-secondary-color mb-4"><i class="fas fa-check-circle"></i></div>
                        <h3 class="text-2xl font-bold mb-4">Final Step: Activation</h3>
                        <p class="text-gray-400 mb-6">Thank you! Your request has been submitted. Click the button below to send your details to our support on Telegram and finalize the activation.</p>
                        <a href="${telegramUrl}" target="_blank" rel="noopener noreferrer" class="inline-block mt-8 bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-8 rounded-lg transition text-lg"><i class="fab fa-telegram-plane mr-2"></i>Contact Support on Telegram</a>
                    </div>`;
                this.showDialog(content);
            }
        };
        
        App.initCountrySelection();
    });

    // --- Google Translate ---
    function googleTranslateElementInit() {
        new google.translate.TranslateElement({pageLanguage: 'en', includedLanguages: 'en,pt,es,de,zh-CN,hi,ar,ru,tl,vi', layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
        new google.translate.TranslateElement({pageLanguage: 'en', includedLanguages: 'en,pt,es,de,zh-CN,hi,ar,ru,tl,vi', layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element_mobile');
    }
    </script>
    <script>
        // Source Code Protection
        document.addEventListener('contextmenu', event => event.preventDefault());
        document.addEventListener('keydown', function(event) {
            if (event.keyCode == 123) { // F12
                event.preventDefault();
            } else if (event.ctrlKey && event.shiftKey && event.keyCode == 73) { // Ctrl+Shift+I
                event.preventDefault();
            } else if (event.ctrlKey && event.keyCode == 85) { // Ctrl+U
                event.preventDefault();
            }
        });
    </script>
</body>
</html>
